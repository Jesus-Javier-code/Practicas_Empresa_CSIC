---
title: "Volcana"
format: 
  dashboard:
    orientation: rows
    scroll: false
    nav-buttons: [github]
    github: https://github.com/Jesus-Javier-code/Practicas_Empresa_CSIC.git
    theme:
      - flatly
logo: B_images/Banner_Volcana_Grande.png
logo-alt: "CSIC logo."
---

<style>
/* ===== VARIABLES Y RESET GENERAL ===== */
:root {
  --volcano-color: #413224;
  --earthquake-color: #413224;
  --active-color: #FBEBE8;
}

body, html, .dashboard {
  overflow: visible !important;
  height: auto !important;
  margin: 0;
  padding: 0;
  font-family: 'Arial', sans-serif;
  min-height: 100vh;
  background:
    linear-gradient(135deg, #FFCC9C 0%, #FFCC9C 100%),
    url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M60 20L90 70H30Z' fill='%23413224' fill-opacity='0.05'/%3E%3C/svg%3E");
  background-attachment: fixed;
  background-repeat: repeat;
  background-blend-mode: overlay;
}

/* ===== NAVEGACIÓN CIRCULAR ===== */
.navbar {
  display: none !important;
}

.circle-nav-container {
  position: fixed;
  bottom: 30px;
  right: 30px;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.circle-nav-btn {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
  border: 3px solid white;
  background-size: 50%;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #413224;
}

.circle-nav-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}

/* Iconos de navegación */
#homepage-btn { 
  background-image: url('B_images/Logo_Volcana_circular.jpeg');
  background-size: 50%;
}
#la-palma-btn { 
  background-image: url('B_images/La_Palma_contorno_naranja.png');
  background-size: 60%;
}
#teide-btn { 
  background-image: url('B_images/Teide_contorno_naranja.png');
  background-size: 80%;
}
#earthquakes-btn { 
  background-image: url('B_images/earthquake-icon-naranja.png');
  background-size: 70%;
}

/* ===== HEADER ===== */
@import url('https://fonts.cdnfonts.com/css/hippo-lettro');
.navbar-brand::after {
  content: "VOLCANA";
  font-family: 'Hippo Letto', sans-serif;
  color: #413224;
  font-size: 1.8rem;
  letter-spacing: 1px;
  margin-left: 10px;
}
.navbar-brand:not(:after) { display: none; }
.navbar {
  background: rgb(251,235,207) !important;
  border-bottom: 3px solid #413224 !important;
  padding: 0.5rem 1rem;
}
.navbar-brand { 
  color: #413224 !important;
  padding: 0 !important;
}
.navbar-nav .nav-link {
  color: #413224 !important;
  margin: 0 10px;
  border-radius: 4px 4px 0 0;
  padding: 8px 15px;
}
.navbar-nav .nav-link.active {
  background-color: #413224 !important;
  color: white !important;
}
.navbar-nav .nav-link:hover:not(.active) {
  background-color: rgba(65,50,36,0.1) !important;
}

/* ===== CONTENIDOS TRANSPARENTES ===== */
.dashboard, .panel-card, .cell, .panel-card-body, 
.panel-tabset, .quarto-figure, iframe {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: visible !important;
}

iframe {
  width: 100% !important;
  height: 400px !important;
  display: block !important;
  overflow: hidden !important;
}

img {
  max-width: 100% !important;
  height: auto !important;
  display: block !important;
  margin: 0 auto !important;
}

/* ===== ESTILOS HOMEPAGE ===== */
.homepage {
  text-align: center;
  padding: 2rem 1rem;
  min-height: calc(100vh - 120px);
}

.homepage-section {
  background-color: rgba(255,255,255,0.7) !important;
  border-radius: 12px !important;
  padding: 1.5rem !important;
  margin: 1.5rem auto !important;
  max-width: 800px !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
}

/* ===== CARRUSEL PRINCIPAL ===== */
.homepage-header, .earthquakes-carousel {
  position: relative;
  width: 100%;
  overflow: hidden;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.homepage-header { 
  height: 400px; 
  margin-bottom: 0 !important;
}
.earthquakes-carousel { 
  height: 120px; 
  margin: 0 0 1rem 0; 
}

.carousel-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.carousel-slide {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: opacity 1s ease-in-out !important;
  background-size: cover;
  background-position: center;
  will-change: opacity;
  backface-visibility: hidden;
}

.carousel-slide.active { opacity: 1; }

.carousel-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.2);
  z-index: 5;
}

.earthquakes-carousel .carousel-overlay { display: none; }

.homepage-logo-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
  text-align: center;
  width: 100%;
}

.homepage-logo {
  width: 150px !important;
  height: 150px !important;
  margin: 0 auto !important;
  box-shadow: 0 0 15px rgba(0,0,0,0.3) !important;
  background-color: rgba(47,45,45,0.8);
  border-radius: 50% !important;
  padding: 5px !important;
}

.teide-logo {
  width: 150px !important;
  height: 150px !important;
  margin: 0 auto !important;
  box-shadow: 0 0 15px rgba(0,0,0,0.3) !important;
  background-color: rgba(47, 45, 45, 0.8);
  border-radius: 50% !important;
  padding: 5px !important;
  position: relative;
  overflow: hidden;
}

.teide-logo img {
  width: 70% !important;
  height: auto !important;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -45%);
  object-fit: contain;
}

/* Contenedor circular */
.earthquake-logo-wrapper {
  width: 150px !important;
  height: 150px !important;
  margin: 0 auto !important;
  border-radius: 50% !important;
  background-color: rgba(47, 45, 45, 0.8);
  box-shadow: 0 0 15px rgba(0,0,0,0.3) !important;
  padding: 5px !important;
  position: relative;
  overflow: hidden;
}

.earthquake-logo {
  width: 80% !important;
  height: auto !important;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -55%);
  object-fit: contain;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}

.lapalma-logo {
  width: 150px !important;
  height: 150px !important;
  margin: 0 auto !important;
  box-shadow: 0 0 15px rgba(0,0,0,0.3) !important;
  background-color: rgba(47, 45, 45, 0.8);
  border-radius: 50% !important;
  padding: 5px !important;
  position: relative;
  overflow: hidden;
}

.lapalma-logo img {
  width: 70% !important;
  height: auto !important;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -45%);
  object-fit: contain;
}

.volcana-title {
  width: auto !important;
  height: auto !important;
  max-height: 120px !important;
  margin: 15px 0 !important;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4)) !important;
  object-fit: contain !important;
}

/* ===== CRÉDITOS FOTOS ===== */
.photo-credits {
  position: absolute;
  bottom: 15px;
  right: 15px;
  z-index: 20;
  color: white;
  font-size: 0.8rem;
  font-family: Arial, sans-serif;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
  display: none;
  background: transparent !important;
}

.photo-credits:not(.hidden) { display: block; }
.photo-credits.hidden { opacity: 0; }

.photo-credits a {
  color: white;
  text-decoration: none;
  font-weight: bold;
}

.photo-credits a:hover { text-decoration: underline; }

/* ===== LOGOS INSTITUCIONALES ===== */
.institutional-logos-container {
  display: flex;
  justify-content: center;
  width: 100%;
}

.institutional-logos {
  display: inline-flex !important;
  flex-wrap: nowrap !important;
  gap: 30px;
  margin: 1rem auto;
  padding: 0 !important;
  background: transparent !important;
}

.institutional-logo {
  height: 45px !important;
  width: auto;
  max-width: 100px;
  transition: all 0.3s ease;
  filter: grayscale(30%);
}

.institutional-logo:hover {
  transform: scale(1.1) translateY(-5px);
  filter: grayscale(0%) drop-shadow(0 5px 5px rgba(0,0,0,0.2));
}

/* ===== POST-ITS ===== */
.post-it-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 30px 0;
}

.post-it {
  padding: 20px;
  border-radius: 5px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.15), 0 3px 6px rgba(0,0,0,0.1);
  transform: rotate(-2deg);
  transition: all 0.3s ease;
  position: relative;
  min-height: 180px;
  display: flex;
  flex-direction: column;
}

.post-it:hover {
  transform: rotate(0deg) scale(1.05);
  box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}

.post-it h3 {
  margin-top: 0;
  border-bottom: 2px dashed rgba(0,0,0,0.1);
  padding-bottom: 10px;
}

.post-it::after {
  content: "";
  position: absolute;
  bottom: 10px;
  right: 10px;
  width: 30px;
  height: 30px;
  background: linear-gradient(135deg, transparent 0%, transparent 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1) 100%);
}

.post-it.yellow {
  background: linear-gradient(135deg, #FFF8B8 0%, #FEF5A4 100%);
  color: #5E4B1A;
}

.post-it.blue {
  background: linear-gradient(135deg, #B8E6FF 0%, #A4D8FE 100%);
  color: #1A3D5E;
}

.post-it.green {
  background: linear-gradient(135deg, #D1F7D1 0%, #BDF5BD 100%);
  color: #1E5E1A;
}

.post-it.pink {
  background: linear-gradient(135deg, #FFD1F7 0%, #FEBDF0 100%);
  color: #5E1A54;
}

/* ===== FOOTER ===== */
.credits-footer {
  margin: 0 !important;
  padding: 0.5rem !important;
  font-size: 0.75rem;
  color: #666;
  border: none !important;
}

.credits-footer a {
  color: #413224;
  margin: 0 3px;
}

/* ===== ESTILOS ESPECÍFICOS LA PALMA ===== */
#la-palma .panel-tabset,
#la-palma .tab-content,
#la-palma .tab-pane,
#la-palma .cell,
#la-palma .cell-output,
#la-palma .cell-output-display,
#la-palma .quarto-figure {
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  box-shadow: none !important;
}

#la-palma iframe {
  background: transparent !important;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* ===== ESTILOS TERREMOTOS ===== */
#earthquakes .panel-tabset {
  background: transparent !important;
  border: none !important;
}

#earthquakes .grid-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

#earthquakes .map-container, 
#earthquakes .histogram-container {
  background: rgba(255,255,255,0.7);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  height: 500px;
}

#earthquakes .table-container {
  width: 100%;
  background: rgba(255,255,255,0.7);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  margin-top: 20px;
}

#earthquakes iframe {
  border: none;
  border-radius: 8px;
  width: 100%;
  height: 100%;
}

/* ===== CORRECCIONES SOLICITADAS ===== */
/* 1. Mapa ocupando todo el espacio */
.map-container iframe {
  width: 100% !important;
  height: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
  display: block;
}

/* 2. Eliminar espacios transparentes */
.main-container > * {
  margin-top: 0 !important;
  margin-bottom: 20px !important;
}
.main-container > *:last-child {
  margin-bottom: 0 !important;
}
.panel-card, .panel-card-body, .panel-tabset {
  padding: 0 !important;
  margin: 0 !important;
}

/* 3. Quitar scroll bar */
.plot-wrapper iframe, iframe[src*="radiative_power_daily"] {
  overflow: hidden !important;
}

/* 4. Eliminar líneas blancas */
#la-palma, .homepage, #teide, #earthquakes {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}
.dashboard, .grid, .row {
  border: none !important;
  outline: none !important;
}

/* Asegurar que no hay espacios residuales */
.dashboard > .grid {
  gap: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}
.dashboard > .grid > .row {
  margin: 0 !important;
  padding: 0 !important;
  gap: 0 !important;
}

/* Limpieza específica para el banner */
.homepage-header {
  margin-bottom: 0 !important;
}

/* Eliminar sombras/bordes residuales de las celdas */
.cell {
  box-shadow: none !important;
  border: none !important;
  outline: none !important;
}

/* ELIMINAR BORDE INFERIOR DE .tab-content */
.tab-content {
  border-bottom: none !important;
  border-left: 1px solid transparent !important;
  border-right: 1px solid transparent !important;
  padding: 1em 1em 0 1em !important;
}

/* ===== ESTILOS PARA LA SECCIÓN DE LA PALMA ===== */
.main-container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 !important;
}

.top-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 25px;
  margin-bottom: 25px;
  width: 100%;
  align-items: stretch;
}

.map-container {
  height: 100%;
  min-height: 450px;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  position: relative;
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
}

.plots-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin: 0 !important;
  padding: 0 !important;
}

.plot-wrapper {
  flex: 1;
  min-width: 400px;
  height: 550px;
  background: transparent !important;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  padding: 0 !important;
  margin: 0 !important;
  position: relative;
  overflow: hidden;
  border: none !important;
}

.video-container {
  margin: 30px 0;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 20px rgba(0,0,0,0.15);
  position: relative;
  padding-bottom: 56.25%;
  height: 0;
}

.video-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border: none;
}

@media (max-width: 900px) {
  .top-container {
    grid-template-columns: 1fr;
  }
  .map-container {
    height: 400px;
  }
  .plot-wrapper {
    min-width: 100%;
  }
}

</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log("🚀 Iniciando carruseles...");
  
  function initCarousel(containerSelector) {
    console.log(`🔍 Buscando carrusel: ${containerSelector}`);
    const container = document.querySelector(containerSelector);
    
    if (!container) {
      console.error(`❌ No se encontró el contenedor: ${containerSelector}`);
      return;
    }
    
    const slides = container.querySelectorAll('.carousel-slide');
    const credits = container.querySelectorAll('.photo-credits');
    
    console.log(`📸 Slides encontrados: ${slides.length}`);
    
    if (slides.length === 0) {
      console.warn(`⚠️ No hay slides en: ${containerSelector}`);
      return;
    }

    let currentIndex = 0;
    let intervalId;

    // Función para actualizar visibilidad
    function updateVisibility() {
      slides.forEach((slide, index) => {
        const isActive = index === currentIndex;
        slide.style.opacity = isActive ? '1' : '0';
        slide.classList.toggle('active', isActive);
        
        if (credits[index]) {
          credits[index].style.display = isActive ? 'block' : 'none';
          credits[index].classList.toggle('hidden', !isActive);
        }
      });
    }

    // Inicializar
    updateVisibility();

    function showNextSlide() {
      console.log("🔄 Cambiando slide...");
      
      // Oculta el slide actual
      slides[currentIndex].style.opacity = '0';
      slides[currentIndex].classList.remove('active');
      if (credits[currentIndex]) {
        credits[currentIndex].style.display = 'none';
        credits[currentIndex].classList.add('hidden');
      }

      // Calcula nuevo índice
      currentIndex = (currentIndex + 1) % slides.length;
      console.log(`🎯 Nuevo índice: ${currentIndex}`);

      // Muestra nuevo slide
      slides[currentIndex].style.opacity = '1';
      slides[currentIndex].classList.add('active');
      if (credits[currentIndex]) {
        credits[currentIndex].style.display = 'block';
        credits[currentIndex].classList.remove('hidden');
      }
    }

    // Iniciar solo si hay más de 1 slide
    if (slides.length > 1) {
      console.log("⏱️ Iniciando intervalo...");
      intervalId = setInterval(showNextSlide, 5000);

      // Pausar al interactuar
      container.addEventListener('mouseenter', () => {
        console.log("⏸️ Pausando carrusel");
        clearInterval(intervalId);
      });
      
      container.addEventListener('mouseleave', () => {
        console.log("▶️ Reanudando carrusel");
        intervalId = setInterval(showNextSlide, 5000);
      });
    }
  }

  // Inicializar todos los carruseles
  initCarousel('.homepage .carousel-container');
  initCarousel('#la-palma .carousel-container');
  initCarousel('#teide .carousel-container');
  initCarousel('#earthquakes .carousel-container');
});
</script>




<script>
document.addEventListener('DOMContentLoaded', function() {
  // Crear botones de navegación
  const navContainer = document.createElement('div');
  navContainer.className = 'circle-nav-container';
  
  navContainer.innerHTML = `
    <div class="circle-nav-btn" id="homepage-btn" title="Home"></div>
    <div class="circle-nav-btn" id="la-palma-btn" title="La Palma"></div>
    <div class="circle-nav-btn" id="teide-btn" title="Teide"></div>
    <div class="circle-nav-btn" id="earthquakes-btn" title="Earthquakes"></div>
  `;
  
  document.body.appendChild(navContainer);

  // Funcionalidad de los botones
  const homepageBtn = document.getElementById('homepage-btn');
  const laPalmaBtn = document.getElementById('la-palma-btn');
  const earthquakesBtn = document.getElementById('earthquakes-btn');
  const teideBtn = document.getElementById
  ('teide-btn')

  homepageBtn.addEventListener('click', () => {
    window.location.hash = '#homepage';
    updateActiveButton('#homepage');
  });
  
  laPalmaBtn.addEventListener('click', () => {
    window.location.hash = '#la-palma';
    updateActiveButton('#la-palma');
  });

  teideBtn.addEventListener('click', () => {
    window.location.hash = '#teide';
    updateActiveButton('#teide');
  });

  earthquakesBtn.addEventListener('click', () => {
    window.location.hash = '#earthquakes';
    updateActiveButton('#earthquakes');
  });

  // Función para actualizar botones visibles
  function updateActiveButton(activeTab) {
    // Reset all buttons
    homepageBtn.style.display = 'flex';
    laPalmaBtn.style.display = 'flex';
    teideBtn.style.display = 'flex';
    earthquakesBtn.style.display = 'flex';
    
    // Hide the active tab button
    switch(activeTab) {
      case '#homepage':
        homepageBtn.style.display = 'none';
        break;
      case '#la-palma':
        laPalmaBtn.style.display = 'none';
        break;
      case '#teide':
        teideBtn.style.display = 'none';
        break;
      case '#earthquakes':
        earthquakesBtn.style.display = 'none';
        break;
    }
  }

  // Actualizar al cargar la página
  function handleHashChange() {
    const currentHash = window.location.hash || '#homepage';
    updateActiveButton(currentHash);
  }

  // Escuchar cambios en el hash
  window.addEventListener('hashchange', handleHashChange);
  
  // Inicializar
  handleHashChange();
  
  // Añadir clase al body para estilos CSS
  document.body.setAttribute('data-has-circular-nav', 'true');
});
</script>

```{python}
#| label: load-packages
from plotnine import *
import great_tables as gt
import pandas as pd
import glob
from IPython.display import Image
import os
import plotly.io as pio
from IPython.display import IFrame, HTML
```

# 🏝️ HOMEPAGE {.homepage}
```{python}
#| label: homepage-content
#| echo: false
HTML(f"""
<div class="homepage">
  <!-- Carrusel optimizado -->
  <div class="homepage-header">
    <div class="carousel-container">
      <!-- Slide 1 -->
      <div class="carousel-slide active" style="background-image: url('B_images/volcano1.jpg');">
        <div class="photo-credits">
          © <a href="https://www.lagacetadesalamanca.es/nacional/las-espeluznantes-imagenes-de-la-lava-del-volcan-de-la-palma-a-la-puerta-de-las-casas-CF9034325" target="_blank">La Gaceta</a>
        </div>
      </div>
      
      <!-- Slide 2 -->
      <div class="carousel-slide" style="background-image: url('B_images/volcano5.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://turismolanzarote.com/que-visitar/cact-lanzarote/montanas-del-fuego/" target="_blank">El País</a>
        </div>
      </div>
      
      <!-- Slide 3 -->
      <div class="carousel-slide" style="background-image: url('B_images/volcano3.jpeg');">
        <div class="photo-credits hidden">
          © <a href="https://www.nationalgeographic.com.es/fotografia/erupcion-palma-imagenes_17364" target="_blank">National Geographic</a>
        </div>
      </div>
      
      <div class="carousel-overlay"></div>
      <div class="homepage-logo-container">
        <img src="B_images/Logo_Volcana.jpeg" alt="VOLCANA Logo" class="homepage-logo">
        <img src="B_images/Volcana_letras.png" alt="VOLCANA" class="volcana-title">
      </div>
    </div>
  </div>

  <div class="homepage-section">
    <h2>About the Project</h2>
    <p class="homepage-text">
      This research project, developed by the CSIC, focuses on the monitoring and analysis of volcanic activity in the Canary Islands. 
      The project particularly investigates the Tajogaite volcano eruption in La Palma in 2021, as well as continuous monitoring of the Teide volcano in Tenerife.
    </p>
    <p class="homepage-text">
      <strong>We are Physics students from the University of La Laguna</strong>, currently undertaking our <strong>company internship program (Prácticas de Empresa)</strong>. 
      This project is part of our training and academic development.
    </p>
    <p class="homepage-text">
      Our team, in collaboration with the <a href="https://www.csic.es/es" target="_blank">CSIC</a> and the <a href="https://www.ull.es/" target="_blank">University of La Laguna</a>, combines various techniques such as remote sensing, data analysis, 
      and scientific visualization to better understand volcanic processes and improve early warning systems.
    </p>
  </div>
  
  <div class="homepage-section">
  <h2>Project Goals</h2>
 
  <div class="post-it-container">
    <!-- Post-it 1 -->
    <div class="post-it yellow">
      <h3>Thermal Analysis</h3>
      <p>Analyze <strong>brightness temperature</strong> and <strong>radiance patterns</strong>, model post-eruption lava cooling curves and monitor the fumarole fields of Teide volcano using thermal infrared data.</p>
    </div>
   
    <!-- Post-it 2 -->
    <div class="post-it blue">
      <h3>Earthquake Correlation</h3>
      <p>Analyze <strong>earthquake-eruption correlations</strong> with a custom trigger index based on distance between the epicenter of the events, the volcano we are studying and the magnitude of these events.</p>
    </div>
   
    <!-- Post-it 3 -->
    <div class="post-it green">
      <h3>Data Screening</h3>
      <p>Perform <strong>seismic filtering</strong> to identify signs of volcanic activation with ~5 year prediction window.</p>
    </div>
   
    <!-- Post-it 4 -->
    <div class="post-it pink">
      <h3>Technical Development</h3>
      <p>Create Python tools for satellite data processing, automated visualization pipelines and ML models for eruption prediction.</p>
    </div>
  </div>
</div>
  
  <div class="homepage-section">
    <h2>Data Sources</h2>
    <p class="homepage-text">
      The primary data sources for this project include:
      <ul>
        <li><strong>NASA LAADS DAAC</strong> (MODIS/VIIRS data)</li>
        <li><strong>Copernicus Open Access Hub</strong> (Sentinel satellite data)</li>
        <li><strong>USGS Earthquake Catalogue</strong> (Seismic and volcanic data)</li>
      </ul>
    </p>
  </div>
  
  <div class="institutional-logos-container">
    <div class="institutional-logos">
      <a href="https://www.csic.es/es" target="_blank" class="institutional-logo-link">
        <img src="B_images/Logotipo_del_CSIC.png" alt="CSIC Logo" class="institutional-logo">
      </a>
      <a href="https://www.ipna.csic.es/" target="_blank" class="institutional-logo-link">
        <img src="B_images/Logo-Ipna-Secic.png" alt="IPNA-CSIC Logo" class="institutional-logo">
      </a>
      <a href="https://www.ull.es/" target="_blank" class="institutional-logo-link">
        <img src="B_images/logo-ull.png" alt="ULL Logo" class="institutional-logo">
      </a>
    </div>
  </div>
</div>
  <!-- Nuevo footer de créditos -->
  <div class="credits-footer">
    <p>Images sources: 
      <a href="https://www.lagacetadesalamanca.es/nacional/las-espeluznantes-imagenes-de-la-lava-del-volcan-de-la-palma-a-la-puerta-de-las-casas-CF9034325" target="_blank">La Gaceta de Salamanca</a>, 
      <a href="https://turismolanzarote.com/que-visitar/cact-lanzarote/montanas-del-fuego/" target="_blank">El País</a>, 
      <a href="https://www.nationalgeographic.com.es/fotografia/erupcion-palma-imagenes_17364" target="_blank">National Geographic</a>.
    </p>
    <p>All images are used for educational and research purposes.</p>
  </div>
</div>
""")

```



# 🏝️ LA PALMA {#la-palma}

```{python}
#| label: geometry
#| include: false
import subprocess
subprocess.run(["python", "../A02_utils/geometry_2.py"], check=True)
```

```{python}
#| label: la-palma-carousel
#| echo: false
HTML(f"""
<div class="homepage">
  <!-- Carrusel optimizado -->
  <div class="homepage-header">
    <div class="carousel-container">
      <!-- Slide 1 -->
      <div class="carousel-slide active" style="background-image: url('B_images/lapalma.png');">
        <div class="photo-credits">
          © <a href="https://volcano.si.edu/volcano.cfm?vn=383010" target="_blank">Smithsonian Institution</a>
        </div>
      </div>
      
      <!-- Slide 2 -->
      <div class="carousel-slide" style="background-image: url('B_images/lapalma2.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://www.elperiodico.com/es/fotos/sociedad/erupcion-palma-imagenes-12093812/12125762" target="_blank">Sociedad</a>
        </div>
      </div>
      
      <!-- Slide 3 -->
      <div class="carousel-slide" style="background-image: url('B_images/lapalma3.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://www.elperiodico.com/es/fotos/sociedad/erupcion-palma-imagenes-12093812/12125762" target="_blank">Sociedad</a>
        </div>
      </div>
      
      <div class="carousel-overlay"></div>
      <div class="homepage-logo-container">
  <div class="lapalma-logo">
    <img src="B_images/La_Palma_contorno_naranja.png" alt="La Palma Logo">
  </div>
  <div class="volcana-title" style="color: #d7512c; font-size: 2.5em; font-weight: bold; margin-top: 10px;">
    Volcanic Activity in La Palma
  </div>
</div>
    </div>
  </div>
</div>
  <!-- Nuevo footer de créditos -->
  <div class="credits-footer">
    </p>
  </div>
</div>
""")
```

```{python}
#| label: setup-potencia
#| echo: false

from IPython.display import HTML

HTML('''
<style>
/* Main container */
.main-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 15px;
}

/* Hero Banner */
.hero-banner {
    background: linear-gradient(135deg, #d7512c 0%, #413224 100%);
    color: white;
    padding: 30px;
    border-radius: 12px;
    margin-bottom: 25px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.hero-title {
    font-size: 2.2em;
    margin-bottom: 15px;
    font-weight: bold;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}

.hero-subtitle {
    font-size: 1.1em;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
}

/* Context box styling */
.context-box {
    background: rgba(255, 255, 255, 0.92);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-left: 5px solid #d7512c;
    margin-bottom: 25px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.context-box:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}

.context-title {
    color: #d7512c;
    font-size: 1.5em;
    margin-bottom: 15px;
    font-weight: bold;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 8px;
}

.context-text {
    color: #413224;
    line-height: 1.7;
    margin-bottom: 15px;
}

/* Top section with text and map */
.top-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    margin-bottom: 25px;
    width: 100%;
    align-items: stretch;
}

.text-container {
    display: flex;
}

.map-container {
    height: 349px;
    min-height: 349px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px transparent;
    top: -8px;
    position: relative;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
}

/* Añade esto al CSS */
.map-container iframe {
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    display: block;
}

.plots-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 0 !important;  /* Elimina márgenes superior e inferior */
    padding: 0 !important;
}

.plot-wrapper {
    flex: 1;
    min-width: 400px;
    height: 550px;
    background: transparent !important;
    border-radius: 12px;
    box-shadow: 0 4px 12px transparent;
    padding: 0 !important;
    margin: 0 !important;  /* Elimina todos los márgenes */
    position: relative;
    overflow: hidden;
    border: none !important;
}

/* Asegura que no haya espacio entre elementos consecutivos */
.context-box + .plots-container,
.plots-container + .context-box {
    margin-top: 0 !important;
}

.plot-caption {
    position: absolute;
    bottom: 10px;
    left: 0;
    right: 0;
    text-align: center;
    color: #666;
    font-size: 0.95em;
    font-style: italic;
    padding: 0 10px;
}

/* Video container */
.video-container {
    margin: 30px 0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
}

.video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}
/* Elimina márgenes residuales */
.main-container > * {
    margin-top: 0 !important;
    margin-bottom: 20px !important;
}

.main-container > *:last-child {
    margin-bottom: 0 !important;
}

/* Elimina padding residual */
.panel-card, .panel-card-body, .panel-tabset {
    padding: 0 !important;
    margin: 0 !important;
}

.video-caption {
    text-align: center;
    margin: 12px 0 0 0;
    color: #666;
    font-size: 0.95em;
}

/* Añade esto */
.plot-wrapper iframe {
    overflow: hidden !important;
}

/* O específicamente para esa gráfica */
iframe[src*="radiative_power_daily"] {
    overflow: hidden !important;
}

/* Key points styling */
.key-points {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

/* Para La Palma */
#la-palma {
    padding-top: 0 !important;
    margin-top: 0 !important;
}

/* Para Homepage y Earthquakes */
.homepage, #earthquakes {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}

/* Eliminar cualquier borde residual */
.dashboard, .grid, .row {
    border: none !important;
    outline: none !important;
}

.key-point {
    background: rgba(255,255,255,0.9);
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-top: 4px solid #d7512c;
}

.key-point-title {
    color: #d7512c;
    font-weight: bold;
    margin-bottom: 10px;
    font-size: 1.1em;
}

/* Credits Footer */
.credits-footer {
    margin-top: 30px;
    padding: 15px 0;
    border-top: 1px solid #eee;
    color: #666;
    font-size: 0.9em;
    text-align: center;
}

/* Responsive adjustments */
@media (max-width: 900px) {
    .top-container {
        grid-template-columns: 1fr;
    }
    .map-container {
        height: 400px;
    }
    .plot-wrapper {
        min-width: 100%;
    }
    .hero-title {
        font-size: 1.8em;
    }
}

iframe {
    border: none !important;
    outline: none !important;
    margin: 0 !important;
    padding: 0 !important;
    display: block;
    overflow: hidden;
}
/* ===== CORRECCIONES SOLICITADAS ===== */
/* 1. Mapa ocupando todo el espacio */
.map-container iframe {
    width: 100% !important;
    height: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    display: block;
}

/* 2. Eliminar espacios transparentes */
.main-container > * {
    margin-top: 0 !important;
    margin-bottom: 20px !important;
}
.main-container > *:last-child {
    margin-bottom: 0 !important;
}
.panel-card, .panel-card-body, .panel-tabset {
    padding: 0 !important;
    margin: 0 !important;
}

/* 3. Quitar scroll bar */
.plot-wrapper iframe, iframe[src*="radiative_power_daily"] {
    overflow: hidden !important;
}

/* 4. Eliminar líneas blancas */
#la-palma, .homepage, #earthquakes {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
    margin-top: 0 !important;
    margin-bottom: 0 !important;
}
.dashboard, .grid, .row {
    border: none !important;
    outline: none !important;
}

/* Asegurar que no hay espacios residuales */
.dashboard > .grid {
    gap: 0 !important;
    margin: 0 !important;
    padding: 0 !important;
}
.dashboard > .grid > .row {
    margin: 0 !important;
    padding: 0 !important;
    gap: 0 !important;
}

.info-box {
  position: absolute;
  top: 10px;
  right: 10px;
}

.info-button {
  background-color: #d7512c;
  color: white;
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  font-size: 16px;
  text-align: center;
  line-height: 24px;
  cursor: pointer;
}

.info-popup {
  display: none;
  position: absolute;
  top: 35px;
  right: 10px;
  background-color: #f9f9f9;
  color: #333;
  padding: 15px;
  border: 1px solid #ccc;
  border-radius: 6px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  z-index: 999;
  width: 600px;
  font-size: 13.5px;
  max-width: 90vw;
}


</style>

<div class="main-container">

  <!-- Hero Banner -->
  <div class="hero-banner">
    <div class="hero-title">Tajogaite Volcano</div>
    <div class="hero-subtitle">
      The 2021 eruption on La Palma produced one of the most thoroughly documented volcanic events in Canary Islands history. 
      Explore the thermal evolution and geological impact through interactive visualizations.
    </div>
  </div>

  <!-- Top Section: Text + Map -->
  <div class="top-container">
    <!-- Text Content -->
    <div class="text-container">
      <div class="context-box">
        <div class="context-title">Decoding the Thermal Signature</div>
        <div class="context-text">
          The Tajogaite eruption established new benchmarks in volcanic monitoring, providing unprecedented thermal resolution across its 85-day eruptive period.
        </div>
        <div class="context-text">
          <strong>Visualization highlights:</strong>
        </div>
        <div class="context-text">
          • Red-shaded period marks official eruption duration<br>
          • Clear phase transitions visible at different temporal scales
        </div>
      </div>
    </div>
    
    <!-- Map -->
    <div class="map-container">
      <iframe src="B_images/la_palma_eruption_viewer.html"></iframe>
    </div>
  </div>

  <!-- Key Points Grid -->
  <div class="key-points">
    <div class="key-point">
      <div class="key-point-title">85 Days of Activity</div>
      <div class="context-text">
        From initial fissure opening on September 19 to declared end on December 13, 2021
      </div>
    </div>
    <div class="key-point">
      <div class="key-point-title">12.2 km² Covered</div>
      <div class="context-text">
        Lava flows ultimately covered an area equivalent to 1,700 football fields
      </div>
    </div>
    <div class="key-point">
      <div class="key-point-title">2974 MW Peak</div>
      <div class="context-text">
        Maximum radiative power recorded during the paroxysmal phase
      </div>
    </div>
  </div>

<div class="plots-container">
  <!-- Gráfica semanal -->
  <div class="plot-wrapper">
    <iframe src="B_images/radiative_power_plot.html" style="height: 100%; width: 100%; border: none;"></iframe>

    <!-- Info Icon & Tooltip for Plot 1 -->
    <div class="info-box">
      <button class="info-button" onclick="toggleInfo('info1')">i</button>
      <div class="info-popup" id="info1">
        This graph shows weekly Fire Radiative Power (FRP) calculated from data provided by Simone Salvatore Aveni. The values, originally derived from satellite infrared measurements, were aggregated and visualized here to reflect the evolution of surface thermal activity at the volcano. FRP values are expressed in megawatts (MW) and represent the intensity of emitted heat over time.
        <br><br>
        Higher values indicate stronger thermal activity, while decreasing or low values suggest surface cooling or inactivity.
      </div>
    </div>
  </div>

  <div class="plot-wrapper">
    <iframe src="B_images/radiative_power_daily.html" style="height: 100%; width: 100%; border: none;"></iframe>
  

    <!-- Info Icon & Tooltip for Plot 2 -->
    <div class="info-box">
      <button class="info-button" onclick="toggleInfo('info2')">i</button>
      <div class="info-popup" id="info2">
        This graph displays the estimated daily Fire Radiative Power (FRP) over the volcano, derived from satellite-based brightness temperature (BT) measurements using the VIIRS sensor (channel I05, 11.45 µm).
        <br><br>
        For each day, the observed BT is compared to a monthly thermal reference (REF), representing the typical background temperature when there is no volcanic activity. Only valid pixels within the defined volcanic area are considered.
        <br><br>
        The FRP for each pixel is calculated using the Stefan–Boltzmann law:
        <br><br>
        FRP = σ · ((T_obs)⁴ - (T_ref)⁴) · A
        <br><br>
        where σ is the Stefan–Boltzmann constant (5.67×10⁻⁸ W·m⁻²·K⁻⁴), T_obs is the observed brightness temperature (K), T_ref is the reference temperature (K), and A is the area per pixel (140,625 m²).
      </div>
    </div>
  </div>
</div>


<style>
/* ESTILOS DEFINITIVOS - CONSISTENTES CON EL DISEÑO ORIGINAL */
.plots-container {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  width: 100%;
  max-width: 1200px; /* Mismo ancho que el contenedor principal */
  margin: 0 auto;
  padding: 0;
}

.plot-wrapper {
  flex: 1;
  min-width: 400px;
  height: 550px; /* Restauramos la altura original */
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 12px transparent; /* Estilo original */
  position: relative;
  padding: 0;
  margin: 0;
  border: none;
}

/* Ajustes para iframes - sin espacios */
.plot-wrapper iframe {
  width: 100% !important;
  height: 100% !important;
  border: none !important;
  margin: 0 !important;
  padding: 0 !important;
  display: block;
}

/* Análisis combinado - estilo mejorado */
.combined-analysis {
  width: 100%;
  padding: 20px;
  background: #f8f8f8;
  border-radius: 8px;
  margin-top: 15px;
  border-left: 4px solid #d7512c;
}

.combined-analysis h3 {
  color: #d7512c;
  margin-top: 0;
  font-size: 1.2em;
}

.combined-analysis p {
  color: #555;
  line-height: 1.6;
}

/* Responsive */
@media (max-width: 768px) {
  .plot-wrapper {
    min-width: 100%;
    height: 450px; /* Altura ajustada para móviles */
  }
}

/* Mantenemos los estilos del info-box como estaban */
.info-box {
  position: absolute;
  top: 10px;
  right: 10px;
}

.info-button {
  background-color: #d7512c;
  color: white;
  border: none;
  border-radius: 50%;
  width: 24px;
  height: 24px;
  font-size: 16px;
  text-align: center;
  line-height: 24px;
  cursor: pointer;
}

.info-popup {
  display: none;
  position: absolute;
  top: 35px;
  right: 10px;
  background-color: #f9f9f9;
  color: #333;
  padding: 15px;
  border: 1px solid #ccc;
  border-radius: 6px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  z-index: 999;
  width: 600px;
  font-size: 13.5px;
  max-width: 90vw;
}
</style>





<!-- Añade esto después del plots-container y antes del video-section -->
<!-- Eruption Background Section -->
<div class="hero-banner eruption-background">
    <div class="hero-content">
        <div class="hero-title">Tajogaite Eruption Background</div>
        <div class="hero-subtitle">
            Seismic precursors, geological anomalies, and the key events that marked the 2021 eruption of Tajogaite
        </div>
    </div>
</div>

<style>
.header-section {
    position: relative;
    margin-bottom: 60px;
}
/* Matching Hero Banner Style */
.eruption-background {
    background: linear-gradient(135deg, #d7512c 0%, #413224 100%);
    text-align: left;
    padding: 50px 40px;
    margin-bottom: 30px;
    position: relative;
    overflow: hidden;
}

/* Hero Banner */
.hero-banner {
    background: linear-gradient(135deg, #d7512c 0%, #413224 100%);
    color: white;
    padding: 30px;
    border-radius: 12px;
    margin-bottom: 25px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.hero-title {
    font-size: 1.5em;
    margin-bottom: 15px;
    font-weight: bold;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}

.section-header {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 15px;
    z-index: 2;
}

.header-content {
    position: relative;
    padding: 20px 0;
    text-align: center;
}

.main-title {
    font-size: 2 rem;
    font-weight: 800;
    color: #d7512c;
    margin: 0;
    line-height: 1.2;
    letter-spacing: 1px;
    position: relative;
    display: inline-block;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
}

.main-title::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, #d7512c, #f2a900);
    border-radius: 2px;
}

.header-divider {
    width: 120px;
    height: 4px;
    background: linear-gradient(90deg, #d7512c, #f2a900);
    margin: 25px auto;
    border-radius: 2px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.subtitle {
    font-size: 1.2rem;
    color: #555;
    max-width: 700px;
    margin: 0 auto;
    font-style: italic;
    position: relative;
    padding-top: 10px;
}

/* Responsive */
@media (max-width: 768px) {
    .main-title {
        font-size: 2rem;
    }
    .subtitle {
        font-size: 1rem;
    }
    .full-width-banner {
        padding: 40px 0;
    }
}

@media (max-width: 480px) {
    .main-title {
        font-size: 1.8rem;
    }
    .header-divider {
        margin: 20px auto;
    }
    .lava-pattern {
        background-size: 150px 30px;
    }
}
</style>

<div class="background-section">
    <!-- Video in top-right corner -->
    <div class="video-feature" style="--video-height: 500px">
        <video controls poster="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d9/La_Palma_Pre-eruption_quakes.webm/800px--La_Palma_Pre-eruption_quakes.webm.jpg">
            <source src="https://upload.wikimedia.org/wikipedia/commons/transcoded/d/d9/La_Palma_Pre-eruption_quakes.webm/La_Palma_Pre-eruption_quakes.webm.1080p.vp9.webm" type="video/webm">
            Your browser does not support the video tag.
        </video>
        <div class="photo-credits">
          © <a href="https://es.wikipedia.org/wiki/Erupci%C3%B3n_volc%C3%A1nica_de_La_Palma_de_2021" target="_blank">IGN</a>
        </div>
    </div>
    
    <!-- Text content -->
    <div class="text-content">
        <div class="context-box">
            <div class="context-title">Geological Background</div>
            <div class="context-text">
                <p>The island of La Palma, experiences seismic activity related to regional tectonics. Between October 2017 and June 2021, eight similar seismic swarms were recorded in the southern part of the island.</p>
                
                <p>A 2021 scientific study using advanced satellite techniques detected anomalies in the subsurface of the Aridane Valley since 2009-2010, suggesting possible volcanic reactivation. However, the study itself noted that in 80% of cases with these types of signals, no eruptions occur.</p>
                
                <p>On September 11, 2021, a new low-intensity seismic swarm began. By Monday the 13th, about 1,500 seismic movements had been recorded, concentrated in the Cumbre Vieja Natural Park.</p>
                
                <p>On September 19, the day the eruption began, more than 300 earthquakes were detected, including one of magnitude 3.8 mbLg at shallow depth. Additionally, ground deformation of up to 15 cm was recorded due to magma pressure.</p>
            </div>
        </div>
    </div>
</div>


<style>
.photo-credits {
    text-align: center;
    margin-top: 8px;
    font-size: 0.8em;
    color: #666;
    padding: 0 10px;
}

.photo-credits a {
    color:rgb(222, 198, 192);
    text-decoration: none;
    font-weight: 500;
}

.photo-credits a:hover {
    text-decoration: underline;
}
.background-section {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    margin-bottom: 40px;
    align-items: start;
}

.video-feature {
    position: sticky;
    top: 20px;
    height: 650px; /* Default height if not specified */
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    background: #000;
}

.video-feature video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.text-content {
    display: flex;
    flex-direction: column;
    min-height: var(--video-height, 400px); /* Matches video height */
}

.context-box {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-left: 5px solid #d7512c;
    flex-grow: 1;
}

.context-title {
    color: #d7512c;
    font-size: 1.6em;
    margin-bottom: 15px;
    font-weight: 700;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 10px;
}

.context-text p {
    margin-bottom: 20px;
    line-height: 1.7;
    color: #333;
}

.context-text p:last-child {
    margin-bottom: 0;
}

.video-caption {
    text-align: center;
    margin-top: 12px;
    color: #666;
    font-size: 0.9em;
    font-style: italic;
    padding: 0 10px;
}

/* Responsive */
@media (max-width: 900px) {
    .background-section {
        grid-template-columns: 1fr;
    }
    
    .video-feature {
        position: relative;
        top: auto;
        margin-bottom: 25px;
        height: auto;
        aspect-ratio: 16/9; /* Better mobile aspect ratio */
    }
    
    .text-content {
        min-height: auto;
    }
}
</style>
<!-- Combined Timeline + Gallery Section -->
<div class="context-box" style="margin-bottom: 25px;">
  <div class="context-title">Eruption Timeline</div>
  <div class="timeline-gallery-grid">
    <!-- Timeline Column -->
    <div class="timeline-column">
      <div class="compact-timeline">
        <!-- Event 1 -->
        <div class="timeline-event">
          <div class="event-date">Sep 19, 2021</div>
          <div class="event-dot"></div>
          <div class="event-content">
            <h4>Eruption Begins</h4>
            <p>Initial fissure opening at Cumbre Vieja with strombolian activity.</p>
          </div>
        </div>
       
        <!-- Event 2 -->
        <div class="timeline-event">
          <div class="event-date">Sep 28, 2021</div>
          <div class="event-dot"></div>
          <div class="event-content">
            <h4>Lava Reaches Ocean</h4>
            <p>First lava ocean entry creating delta formations.</p>
          </div>
        </div>
       
        <!-- Event 3 -->
        <div class="timeline-event">
          <div class="event-date">Oct 15, 2021</div>
          <div class="event-dot"></div>
          <div class="event-content">
            <h4>Peak Activity</h4>
            <p>Maximum thermal output (2974 MW) recorded.</p>
          </div>
        </div>
       
        <!-- Event 4 -->
        <div class="timeline-event">
          <div class="event-date">Dec 13, 2021</div>
          <div class="event-dot"></div>
          <div class="event-content">
            <h4>Eruption Ends</h4>
            <p>After 85 days, covering 12.2 km².</p>
          </div>
        </div>
      </div>
    </div>
   
    <!-- Gallery Column -->
    <div class="gallery-column">
      <div class="thermal-gallery">
        <div class="gallery-row">
          <div class="gallery-item">
            <div class="image-container">
              <img src="https://cdn.shortpixel.ai/spai/w_1227+q_glossy+ret_img+to_auto/lapalmastars.com/wp-content/uploads/2022/04/volcan_foto1.jpeg" alt="Eruption begins">
            </div>
            <div class="gallery-text">
              <div class="gallery-caption">Eruption begins</div>
              <p class="image-description">It began emitting columns of smoke and ash, then started its strombolian activity with lava fountains reaching heights of 300 to 500 meters.</p>
            </div>
          </div>
          <div class="gallery-item">
            <div class="image-container">
              <img src="https://volcano.si.edu/images/bulletin/383010/383010_BGVN_042.jpg" alt="Lava reaches ocean">
            </div>
            <div class="gallery-text">
              <div class="gallery-caption">Lava reaches ocean</div>
              <p class="image-description">Lava reaches Atlantic Ocean forming "Playa Nueva" delta (0.48 km²). Steam clouds contain HCl and volcanic glass particles.</p>
            </div>
          </div>
        </div>
        <div class="gallery-row">
          <div class="gallery-item">
            <div class="image-container">
              <img src="https://estaticos-cdn.prensaiberica.es/clip/256ca343-fefb-4826-974c-d558e4ebcc13_source-aspect-ratio_default_0.webp" alt="Peak activity">
            </div>
            <div class="gallery-text">
              <div class="gallery-caption">Peak activity</div>
              <p class="image-description">Peak activity with 2974 MW radiative power output.It emitted large-scale fountains of Strombolian lava, ash, and SO₂.</p>
            </div>
          </div>
          <div class="gallery-item">
            <div class="image-container">
              <img src="https://static.eldiario.es/clip/ae527920-e930-4d94-a28d-944f2824d2c4_16-9-discover-aspect-ratio_default_0.webp" alt="Eruption ends">
            </div>
            <div class="gallery-text">
              <div class="gallery-caption">Eruption ends</div>
              <p class="image-description">Progressive cooling of lava flows (12.2 km² coverage). Around 370 hectares of crops were affected and 2.998 buildings were destroyed.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
/* SOLUCIÓN DEFINITIVA PARA LAS IMÁGENES */
.image-container {
  width: 100%;
  height: 100px; /* Altura fija */
  overflow: hidden; /* Recorta el exceso */
  position: relative;
}

.image-container img {
  width: 100%;
  height: 100%;
  object-fit: cover; /* Ajusta manteniendo proporciones */
  object-position: center; /* Centrado por defecto */
  display: block;
  transition: transform 0.5s ease;
}

/* Ajustes específicos para cada imagen */
.gallery-row:nth-child(1) .gallery-item:nth-child(1) img {
  object-position: 60% 30%; /* Ajuste para primera imagen */
}

.gallery-row:nth-child(2) .gallery-item:nth-child(1) img {
  object-position: 70% center; /* Ajuste especial para la tercera imagen problemática */
}

/* Contenedor de texto */
.gallery-text {
  padding: 12px 15px;
  background: rgba(255,255,255,0.95);
}

/* Texto descriptivo */
.image-description {
  color: #555;
  text-align: center;
  font-size: 0.8em;
  line-height: 1.4;
  margin: 8px 0 0 0;
}

/* Ajuste para el título */
.gallery-caption {
  font-size: 0.9em;
  padding: 0;
  text-align: left;
  font-weight: bold;
  color: #d7512c;
}

/* Reestructuración del ítem */
.gallery-item {
  display: flex;
  flex-direction: column;
}

/* Ajuste de altura de imagen */
.image-container {
  height: 150px; /* Reducida para compensar el texto */
}

/* ESTRUCTURA PRINCIPAL */
.timeline-gallery-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-top: 20px;
}

/* TIMELINE STYLES */
.compact-timeline {
  position: relative;
  padding-left: 40px;
}

.compact-timeline::before {
  content: '';
  position: absolute;
  width: 3px;
  background-color: #d7512c;
  top: 10px;
  bottom: 10px;
  left: 15px;
}

.timeline-event {
  position: relative;
  margin-bottom: 25px;
}

.event-date {
  font-weight: bold;
  color: #d7512c;
  margin-bottom: 5px;
  font-size: 0.95em;
}

.event-dot {
  position: absolute;
  width: 16px;
  height: 16px;
  background-color: #fff;
  border: 3px solid #d7512c;
  border-radius: 50%;
  left: -38px;
  top: 3px;
}

.event-content {
  background: rgba(255,255,255,0.85);
  border-radius: 8px;
  padding: 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  transition: transform 0.3s ease;
}

.event-content:hover {
  transform: translateX(5px);
}

.event-content h4 {
  margin-top: 0;
  color: #413224;
  font-size: 1.1em;
}

.event-content p {
  color: #666;
  margin-bottom: 0;
  font-size: 0.9em;
}

/* GALLERY STYLES */
.thermal-gallery {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.gallery-row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
}

.gallery-item {
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  transition: all 0.3s ease;
}

.gallery-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 12px rgba(0,0,0,0.15);
}

.gallery-item:hover img {
  transform: scale(1.05);
}

.gallery-caption {
  padding: 10px;
  background: rgba(255,255,255,0.9);
  text-align: center;
  font-size: 0.85em;
  color: #413224;
  font-weight: bold;
}

/* RESPONSIVE ADJUSTMENTS */
@media (max-width: 900px) {
  .timeline-gallery-grid {
    grid-template-columns: 1fr;
  }
 
  .compact-timeline {
    padding-left: 30px;
    margin-bottom: 30px;
  }
 
  .event-dot {
    left: -28px;
  }
}

@media (max-width: 480px) {
  .gallery-row {
    grid-template-columns: 1fr;
  }
 
  .image-container {
    height: 180px;
  }
 
  .event-content {
    padding: 12px;
  }
}
</style>

<!-- Media Gallery Header Section -->
<div class="hero-banner media-gallery-header">
    <div class="hero-content">
        <div class="hero-title">Tajogaite in Motion</div>
        <div class="hero-subtitle">
            Visual chronicle of the 2021 eruption through thermal imagery, video documentation, and photographic records
        </div>
    </div>
</div>
<!-- Video Grid -->
<div class="media-grid">
    <!-- Main Video -->
    <div class="video-feature-main">
        <div class="video-container">
            <iframe src="https://www.youtube.com/embed/yDgV1YTPxok" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div class="video-caption">BBC Earth documentary footage showing the eruption's most violent phase (October 2021)</div>
    </div>
   
    <!-- Secondary Videos - Ahora centrados -->
    <div class="video-secondary">
        <div class="small-video">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/EOIwjeJMNxM" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="video-caption">Time-lapse of lava flow advancement (Canary Islands Volcanology Institute)</div>
        </div>
       
        <div class="small-video">
            <div class="video-container">
                <iframe src="https://www.youtube.com/embed/tEYoS3zoV-8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <div class="video-caption">Thermal camera footage showing vent dynamics (IGN Spain)</div>
        </div>
    </div>
</div>


<style>
.hero-banner {
    background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url('https://estaticos-cdn.prensaiberica.es/clip/256ca343-fefb-4826-974c-d558e4ebcc13_source-aspect-ratio_default_0.webp');
    background-size: cover;
    background-position: center;
    padding: 80px 20px;
    text-align: center;
    margin-bottom: 30px;
}

.hero-content {
    position: relative;
    z-index: 2;
    max-width: 800px;
    margin: 0 auto;
}

.hero-title {
    font-size: 2.5rem;
    font-weight: 800;
    color: white;
    margin-bottom: 15px;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
    letter-spacing: 1px;
    position: relative;
    display: inline-block;
}

.hero-title::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, #ff9e7d, #f2d900);
    border-radius: 2px;
}

.media-gallery-header .hero-title {
    font-size: 2.5rem;
    font-weight: 800;
    color: white;
    margin-bottom: 15px;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
}

.media-gallery-header .hero-subtitle {
    font-size: 1.1rem;
    color: rgba(255,255,255,0.9);
    max-width: 700px;
    margin: 0 auto;
    font-weight: 300;
    line-height: 1.5;
}

/* Video Grid Styles */
.media-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 20px;
    margin-top: 20px;
}

.video-feature-main {
    grid-row: span 2;
}

.video-secondary {
    display: flex;
    flex-direction: column;
    gap: 20px;
}

.video-container {
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
    overflow: hidden;
    border-radius: 8px;
    margin-bottom: 10px;
}

.video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}

.video-caption {
    text-align: center;
    color: #666;
    font-size: 0.85em;
    padding: 0 10px;
}

.small-video .video-container {
    padding-bottom: 60%; /* Slightly different aspect ratio */
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .media-grid {
        grid-template-columns: 1fr;
    }
    
    .video-secondary {
        flex-direction: row;
    }
    
    .media-gallery-header .hero-title {
        font-size: 2rem;
    }
}

@media (max-width: 480px) {
    .video-secondary {
        flex-direction: column;
    }
    
    .small-video .video-container {
        padding-bottom: 56.25%;
    }
    
    .media-gallery-header .hero-title {
        font-size: 1.8rem;
    }
    
    .media-gallery-header .hero-subtitle {
        font-size: 1rem;
    }
}

.context-box {
    background: #fff;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 30px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.context-title {
    font-size: 1.5rem;
    color: #d7512c;
    margin-bottom: 15px;
    font-weight: 700;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 10px;
}

.context-text {
    color: #555;
    line-height: 1.6;
    margin-bottom: 20px;
}
</style>


<div class="simple-carousel">
    <!-- Imagen Principal con contenedor de créditos -->
    <div class="main-image-container">
        <img id="main-carousel-image" src="https://media.npr.org/assets/img/2021/12/25/ap21346543334883-e942f2c48324259d57bc960cd29c943dd67667a9.jpg?s=2000&c=85&f=webp" alt="Tajogaite Eruption">
        <div id="photo-credits" class="photo-credits">© <a href="https://www.npr.org/2021/12/25/1068012842/la-palma-volcano-eruption-ends" target="_blank">NPR</a></div>
    </div>
   
    <!-- Indicadores de Puntos -->
    <div class="carousel-dots">
        <span class="dot active" data-index="0"></span>
        <span class="dot" data-index="1"></span>
        <span class="dot" data-index="2"></span>
        <span class="dot" data-index="3"></span>
        <span class="dot" data-index="4"></span>
        <span class="dot" data-index="5"></span>
        <span class="dot" data-index="6"></span>
    </div>
</div>

<style>
.simple-carousel {
    max-width: 1000px;
    margin: 30px auto;
    text-align: center;
    position: relative;
}

.main-image-container {
    position: relative;
    margin-bottom: 20px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    height: 500px;
}

#main-carousel-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: opacity 0.5s ease;
}

.photo-credits {
    position: absolute;
    bottom: 15px;
    right: 15px;
    background: rgba(0,0,0,0.7);
    color: white;
    padding: 8px 15px;
    border-radius: 20px;
    font-size: 0.85em;
    opacity: 1;
    transition: opacity 0.3s ease;
}

.photo-credits a {
    color: #ff9e7d;
    text-decoration: none;
}

.carousel-dots {
  display: flex;
  justify-content: center;
  gap: 12px;
  margin-top: 20px;
  flex-direction: row;
}

.dot {
    width: 14px;
    height: 14px;
    border-radius: 50%;
    background: #ccc;
    cursor: pointer;
    transition: all 0.3s ease;
}

.dot.active {
    background: #d7512c;
    transform: scale(1.2);
}

/* Efecto de fade para la transición */
.fade-out {
    opacity: 0 !important;
}

/* Responsive */
@media (max-width: 768px) {
    .main-image-container {
        height: 350px;
    }
}

@media (max-width: 480px) {
    .main-image-container {
        height: 250px;
    }
   
    .dot {
        width: 12px;
        height: 12px;
    }
    
    .photo-credits {
        font-size: 0.7em;
        padding: 5px 10px;
    }
}
</style>

  <!-- Credits Footer -->
  <div class="credits-footer">
    <p><strong>Data sources:</strong> Smithsonian Global Volcanism Program • USGS • IGN Spain • NASA LAADS DAAC</p>
    <p>All content presented for educational and scientific research purposes</p>
  </div>
</div>


''')


```
<script>
// Script para ajuste dinámico si es necesario
document.addEventListener('DOMContentLoaded', function() {
  const iframes = document.querySelectorAll('.plot-wrapper iframe');
  
  function resizeIframes() {
    iframes.forEach(iframe => {
      iframe.style.height = iframe.parentElement.offsetHeight + 'px';
    });
  }
  
  resizeIframes();
  window.addEventListener('resize', resizeIframes);
});
</script>
<script>
function toggleInfo() {
  const popup = document.getElementById("info-popup");
  popup.style.display = (popup.style.display === "block") ? "none" : "block";
}
</script>

<script>
function toggleInfo(id) {
    const popup = document.getElementById(id);
    const isVisible = popup.style.display === 'block';
    
    // Cierra cualquier otro popup abierto
    document.querySelectorAll('.info-popup').forEach(p => p.style.display = 'none');

    // Alterna visibilidad del actual
    popup.style.display = isVisible ? 'none' : 'block';
}
</script>


<script>
document.addEventListener('DOMContentLoaded', function() {
    const images = [
        {
            src: "https://media.npr.org/assets/img/2021/12/25/ap21346543334883-e942f2c48324259d57bc960cd29c943dd67667a9.jpg?s=2000&c=85&f=webp",
            credit: '© <a href="https://www.npr.org/2021/12/25/1068012842/la-palma-volcano-eruption-ends" target="_blank">NPR</a>'
        },
        {
            src: "https://media.npr.org/assets/img/2021/12/25/ap21333740073510-5f70d9b23c0b55c9e3964d87928a90879948af59.jpg?s=2000&c=85&f=webp",
            credit: '© <a href="https://www.npr.org/2021/12/25/1068012842/la-palma-volcano-eruption-ends" target="_blank">NPR</a>'
        },
        {
            src: "https://media.npr.org/assets/img/2021/12/25/ap21334562130732-4c641859dbf9a21ac419a673e2e563f9efb1d922.jpg?s=2000&c=85&f=webp",
            credit: '© <a href="https://www.npr.org/2021/12/25/1068012842/la-palma-volcano-eruption-ends" target="_blank">NPR</a>'
        },
        {
            src: "https://people.com/thmb/c4q0OmUYsR1r6jad-j_TITL5zqQ=/750x0/filters:no_upscale():max_bytes(150000):strip_icc():focal(986x589:988x591):format(webp)/la-palma-true-story-main-121724-22fa714f85274d5bb8346e9de713e833.jpg",
            credit: '© <a href="https://people.com/la-palma-true-story-8763080" target="_blank">People</a>'
        },
        {
            src: "https://media-cldnry.s-nbcnews.com/image/upload/t_fit-760w,f_auto,q_auto:best/rockcms/2021-12/211203-la-palma-mb-1336-5c3d37.jpg",
            credit: '© <a href="https://www.lkz.de/%C3%BCberregionales_artikel,-la-palma-lava-noch-800-meter-von-la-laguna-entfernt-_arid,662809.html" target="_blank">1kz</a>'
        },
        {
            src: "https://www.seguritecnia.es/wp-content/uploads/2022/11/plano-general-zona-exclusion.jpg",
            credit: '© <a href="https://visitlapalma.es/en/experiences/why-a-new-volcano-appeared-in-la-palma/" target="_blank">Visitlapalma</a>'
        },
        {
            src: "https://static.euronews.com/articles/stories/06/17/54/94/1200x675_cmsv2_33d484f9-787a-568c-8009-58d13ff01985-6175494.jpg",
            credit: '© <a href="https://www.euronews.com" target="_blank">Euronews</a>'
        }
    ];

    const mainImage = document.getElementById('main-carousel-image');
    const photoCredits = document.getElementById('photo-credits');
    const dots = document.querySelectorAll('.dot');
    let currentIndex = 0;
    let intervalId;

    function updateCarousel(index) {
        // Aplicar fade-out a la imagen y créditos actuales
        mainImage.classList.add('fade-out');
        photoCredits.classList.add('fade-out');
        
        // Esperar a que termine la transición de fade-out
        setTimeout(() => {
            // Cambiar la imagen y los créditos
            mainImage.src = images[index].src;
            photoCredits.innerHTML = images[index].credit;
            
            // Quitar fade-out para mostrar el nuevo contenido
            mainImage.classList.remove('fade-out');
            photoCredits.classList.remove('fade-out');
            
            // Actualizar puntos activos
            dots.forEach(dot => dot.classList.remove('active'));
            dots[index].classList.add('active');
            
            currentIndex = index;
        }, 300); // Este tiempo debe coincidir con la duración de la transición CSS
    }

    // Eventos para los puntos
    dots.forEach(dot => {
        dot.addEventListener('click', () => {
            const index = parseInt(dot.getAttribute('data-index'));
            if (index !== currentIndex) {
                // Reiniciar el intervalo cuando se hace clic manualmente
                clearInterval(intervalId);
                updateCarousel(index);
                startAutoRotation();
            }
        });
    });

    // Función para iniciar la rotación automática
    function startAutoRotation() {
        intervalId = setInterval(() => {
            const nextIndex = (currentIndex + 1) % images.length;
            updateCarousel(nextIndex);
        }, 5000);
    }

    // Iniciar la rotación automática
    startAutoRotation();
});
</script>

<script>
// Script opcional para ajuste dinámico de altura
document.addEventListener('DOMContentLoaded', function() {
  const iframes = document.querySelectorAll('.plot-wrapper iframe');
  
  function resizeIframes() {
    iframes.forEach(iframe => {
      iframe.style.height = iframe.parentElement.offsetHeight + 'px';
    });
  }
  
  // Ajustar al cargar y al redimensionar
  resizeIframes();
  window.addEventListener('resize', resizeIframes);
});
</script>

# TEIDE {#teide}
```{python}

#| label: teide-carousel
#| echo: false

from IPython.display import HTML

HTML(f"""
<div class="homepage">
  <!-- Carrusel optimizado -->
  <div class="homepage-header">
    <div class="carousel-container">
      
      <!-- Slide 1 -->
      <div class="carousel-slide active" style="background-image: url('B_images/teide1.jpg');">
        <div class="photo-credits">
          © <a href="https://diariodeavisos.elespanol.com/2020/06/las-fumarolas-del-teide-alimentarian-generadores-termoelectricos/" target="_blank">Diario de Avisos</a>
        </div>
      </div>

      <!-- Slide 2 -->
      <div class="carousel-slide" style="background-image: url('B_images/teide2.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://www.eldia.es/buzzeando/2025/04/04/extrana-imagen-teide-dejado-borrasca-dv-116063039.html" target="_blank">El Día</a>
        </div>
      </div>

      <!-- Slide 3 -->
      <div class="carousel-slide" style="background-image: url('B_images/teide3.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://tenerifeandoporelmundo.com/2016/11/ascenso-al-pico-del-teide-en-teleferico.html" target="_blank">Tenerifeando por el mundo</a>
        </div>
      </div>

      <div class="carousel-overlay"></div>

      <!-- Logo del Teide -->
      <div class="homepage-logo-container">
        <div class="teide-logo">
          <img src="B_images/Teide_contorno_naranja.png" alt="Teide Logo">
        </div>
        <div class="volcana-title" style="color: #d7512c; font-size: 2.5em; font-weight: bold; margin-top: 10px;">
          El Teide
        </div>
      </div>

    </div>
  </div>
</div>
""")
```



# 🕳️ EARTHQUAKES {#earthquakes}

```{python}
#| label: geometry_1
#| include: false
import subprocess
result = subprocess.run(["python", "../A02_utils/geometry.py"], capture_output=True, text=True)
print(result.stdout)
if result.stderr:
    print("Errors:", result.stderr)
```

```{python}
#| label: earthquakes-carousel
#| echo: false
HTML(f"""
<div class="homepage">
  <!-- Carrusel optimizado -->
  <div class="homepage-header">
    <div class="carousel-container">
      <!-- Slide 1 -->
      <div class="carousel-slide active" style="background-image: url('B_images/earthquake2.jpg');">
        <div class="photo-credits">
          © <a href="https://seismo.berkeley.edu/blog/2016/11/23/an-earthquake-of-two-flavors.html" target="_blank">Berkeley Seismology Lab</a>
        </div>
      </div>
      
      <!-- Slide 2 -->
      <div class="carousel-slide" style="background-image: url('B_images/earthquake3.jpg');">
        <div class="photo-credits hidden">
          © <a href="http://www.thulescientific.com/media.htm" target="_blank">Thule Scientific</a>
        </div>
      </div>
      
      <!-- Slide 3 -->
      <div class="carousel-slide" style="background-image: url('B_images/earthquake4.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://temblor.net/" target="_blank">Temblor.net</a>
        </div>
      </div>
      
      <div class="carousel-overlay"></div>
      <div class="homepage-logo-container">
  <div class="earthquake-logo-wrapper">
    <img src="B_images/earthquake-icon-naranja.png" alt="Earthquake Icon" class="earthquake-logo">
  </div>
  <div class="volcana-title" style="color: #d7512c; font-size: 2.5em; font-weight: bold; margin-top: 10px;">
    Volcanic-Seismic Relation
  </div>
</div>
    </div>
  </div>
</div>
  <!-- Nuevo footer de créditos -->
  <div class="credits-footer">
    </p>
  </div>
</div>
""")
```


## Formulario de Entrada

<!-- Formulario HTML para capturar inputs -->
<div>
  <label for="date_i">Initial Date:</label>
  <input type="date" id="date_i" name="date_i">
</div>

<div>
  <label for="date_f">Final Date:</label>
  <input type="date" id="date_f" name="date_f">
</div>

<div>
  <label for="latitude">Latitude:</label>
  <input type="number" id="latitude" name="latitude" step="0.0001">
</div>

<div>
  <label for="longitude">Longitude:</label>
  <input type="number" id="longitude" name="longitude" step="0.0001">
</div>


<div>
  <label for="radius">Radius (km):</label>
  <input type="number" id="radius" name="region" min="1">
</div>

<button onclick="ejecutarPython()">Update Search</button>

<!-- Resultados -->
<div id="result"></div>

<!-- Script para ejecutar Python con Pyodide -->
<script type="module">
async function ejecutarPython() {
  // Capturar valores del formulario
  const Initial_date = document.getElementById('date_i').value;
  const Final_date = document.getElementById('date_f').value;
  const latitude = parseFloat(document.getElementById('latitude').value);
  const longitude = parseFloat(document.getElementById('longitude').value);
  const radius = parseFloat(document.getElementById('radius').value);

 // Cargar Pyodide (solo una vez)
  if (!window.pyodide) {
    window.pyodide = await loadPyodide({
      indexURL: "https://cdn.jsdelivr.net/pyodide/v0.23.4/full/"
    });
    await pyodide.loadPackage("micropip");
  }

  // Instalar paquetes necesarios (si es requerido)
  await pyodide.runPythonAsync(`
    import micropip
    await micropip.install(['pandas', 'numpy'])  # Ejemplo: instalar librerías
  `);

  
  // Ejecutar función de Python con los inputs
  const resultado = await pyodide.runPythonAsync(`
    def consultar_datos(date_i, date_f, latitude, longitude, radius):
        # Aquí va tu lógica de Python (ejemplo simplificado)
        import pandas as pd
        return f"Consulted data: {date_i} a {date_f}, Coord: ({latitude}, {longitude}), Radius: {radius} km"

    consultar_datos("${Initial_date}", "${Final_date}", ${latitude}, ${longitude}, ${radius})
  `);

  // Mostrar resultados en el HTML
  document.getElementById("result").innerHTML = result;
}
</script>

## Earthquake Monitoring {.panel-tabset}

### Mapa de Actividad Sísmica

```{python}
#| label: eq-maps-side-by-side
#| echo: false
from IPython.display import HTML

display(HTML('''
<div style="display: flex; flex-direction: row; justify-content: space-between; gap: 20px; flex-wrap: nowrap; margin-bottom: 30px;">
  <!-- Mapa 1 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_map.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>

  <!-- Mapa 2 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_map_filtered.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>
</div>
'''))


```
```{python}
#| label: eq-histograms-side-by-side
#| echo: false
from IPython.display import HTML

display(HTML('''
<div style="display: flex; flex-direction: row; justify-content: space-between; gap: 20px; flex-wrap: nowrap; margin-bottom: 30px;">
  <!-- Histograma 1 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_histogram.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>

  <!-- Histograma 2 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_trigger_histogram.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>
</div>
'''))

```

```{python}
#| label: eq-table-fullwidth
#| echo: false
from IPython.display import HTML

display(HTML('''
<div style="width: 100%; max-width: 1200px; margin: 0 auto; margin-top: -10px;">
  <iframe src="./B_images/eq_table.html" width="100%" height="500" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"></iframe>
</div>
'''))

```

```{python}
#| label: earthquakes-credits
#| echo: false
HTML("""

<!-- Credits Footer -->
  <div class="credits-footer">
    <p><strong>Data sources:</strong> Berkeley Seismology Lab • Thule Scientific • Temblor.net</p>
    <p>All content presented for educational and scientific research purposes</p>
  </div>
</div>
""")

```









