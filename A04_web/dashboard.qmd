---
title: "Volcana"
format: 
  dashboard:
    orientation: rows
    scroll: false
    nav-buttons: [github]
    github: https://github.com/Jesus-Javier-code/Practicas_Empresa_CSIC.git
    theme:
      - flatly
logo: B_images/Banner_Volcana_Grande.png
logo-alt: "CSIC logo."
---
<style>
/* ===== VARIABLES Y RESET GENERAL ===== */
:root {
  --volcano-color: #413224;
  --earthquake-color: #413224;
  --active-color: #FBEBE8;
}

body, html, .dashboard {
  overflow: visible !important;
  height: auto !important;
  margin: 0;
  padding: 0;
  font-family: 'Arial', sans-serif;
  min-height: 100vh;
  background:
    linear-gradient(135deg, #FFCC9C 0%, #FFCC9C 100%),
    url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M60 20L90 70H30Z' fill='%23413224' fill-opacity='0.05'/%3E%3C/svg%3E");
  background-attachment: fixed;
  background-repeat: repeat;
  background-blend-mode: overlay;
}

/* ===== NAVEGACIÓN CIRCULAR ===== */
.navbar {
  display: none !important;
}

.circle-nav-container {
  position: fixed;
  bottom: 30px;
  right: 30px;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.circle-nav-btn {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  transition: all 0.3s ease;
  border: 3px solid white;
  background-size: 50%;
  background-position: center;
  background-repeat: no-repeat;
  background-color: #413224;
}

.circle-nav-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}

/* Iconos de navegación - Ajustado el icono de terremotos para hacerlo más grande */
#homepage-btn { 
  background-image: url('B_images/Logo_Volcana_circular.jpeg');
  background-size: 50%;
}
#la-palma-btn { 
  background-image: url('B_images/La_Palma_contorno_naranja.png');
  background-size: 60%;
}
#earthquakes-btn { 
  background-image: url('B_images/earthquake-icon-naranja.png');
  background-size: 70%; /* Aumentado de 50% a 60% para hacerlo más grande */
}

/* ===== HEADER ===== */
@import url('https://fonts.cdnfonts.com/css/hippo-lettro');
.navbar-brand::after {
  content: "VOLCANA";
  font-family: 'Hippo Letto', sans-serif;
  color: #413224;
  font-size: 1.8rem;
  letter-spacing: 1px;
  margin-left: 10px;
}
.navbar-brand:not(:after) { display: none; }
.navbar {
  background: rgb(251,235,207) !important;
  border-bottom: 3px solid #413224 !important;
  padding: 0.5rem 1rem;
}
.navbar-brand { 
  color: #413224 !important;
  padding: 0 !important;
}
.navbar-nav .nav-link {
  color: #413224 !important;
  margin: 0 10px;
  border-radius: 4px 4px 0 0;
  padding: 8px 15px;
}
.navbar-nav .nav-link.active {
  background-color: #413224 !important;
  color: white !important;
}
.navbar-nav .nav-link:hover:not(.active) {
  background-color: rgba(65,50,36,0.1) !important;
}

/* ===== CONTENIDOS TRANSPARENTES ===== */
.dashboard, .panel-card, .cell, .panel-card-body, 
.panel-tabset, .quarto-figure, iframe {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  margin: 0 !important;
  padding: 0 !important;
  overflow: visible !important;
}

iframe {
  width: 100% !important;
  height: 400px !important;
  display: block !important;
}


img {
  max-width: 100% !important;
  height: auto !important;
  display: block !important;
  margin: 0 auto !important;
}

/* ===== ESTILOS HOMEPAGE ===== */
.homepage {
  text-align: center;
  padding: 2rem 1rem;
  min-height: calc(100vh - 120px);
}

.homepage-section {
  background-color: rgba(255,255,255,0.7) !important;
  border-radius: 12px !important;
  padding: 1.5rem !important;
  margin: 1.5rem auto !important;
  max-width: 800px !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
}

/* ===== CARRUSEL PRINCIPAL ===== */
.homepage-header, .earthquakes-carousel {
  position: relative;
  width: 100%;
  overflow: hidden;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.homepage-header { height: 400px; margin-bottom: 2rem; }
.earthquakes-carousel { height: 120px; margin: 0 0 1rem 0; }

.carousel-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.carousel-slide {
  position: absolute;
  width: 100%;
  height: 100%;
  opacity: 0;
  transition: opacity 1s ease-in-out !important;
  background-size: cover;
  background-position: center;
  will-change: opacity;
  backface-visibility: hidden;
}

.carousel-slide.active { opacity: 1; }

.carousel-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.2);
  z-index: 5;
}

.earthquakes-carousel .carousel-overlay { display: none; }

.homepage-logo-container {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 10;
  text-align: center;
  width: 100%;
}

.homepage-logo {
  width: 150px !important;
  height: 150px !important;
  margin: 0 auto !important;
  box-shadow: 0 0 15px rgba(0,0,0,0.3) !important;
  background-color: rgba(47,45,45,0.8);
  border-radius: 50% !important;
  padding: 5px !important;
}

/* Contenedor circular (mantiene la forma) */
.earthquake-logo-wrapper {
  width: 150px !important;
  height: 150px !important;
  margin: 0 auto !important;
  border-radius: 50% !important;
  background-color: rgba(47, 45, 45, 0.8);
  box-shadow: 0 0 15px rgba(0,0,0,0.3) !important;
  padding: 5px !important;
  position: relative;
  overflow: hidden;
}


/* Imagen DESALINEADA intencionalmente */
.earthquake-logo {
  width: 80% !important;
  height: auto !important;
  position: absolute;
  top: 50%;  /* Cambia este valor para mover verticalmente (ej: 40% para arriba) */
  left: 50%; /* Cambia este valor para mover horizontalmente (ej: 60% para derecha) */
  transform: translate(-50%, -55%);
  object-fit: contain;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}


/* ESTILOS PARA EL LOGO DE TEXTO "VOLCANA" */
.volcana-title {
  width: auto !important;
  height: auto !important;
  max-height: 120px !important;
  margin: 15px 0 !important;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4)) !important;
  object-fit: contain !important;
}

/* ===== CRÉDITOS FOTOS ===== */
.photo-credits {
  position: absolute;
  bottom: 15px;
  right: 15px;
  z-index: 20;
  color: white;
  font-size: 0.8rem;
  font-family: Arial, sans-serif;
  text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
  display: none;
  background: transparent !important;
}

.photo-credits:not(.hidden) { display: block; }
.photo-credits.hidden { opacity: 0; }

.photo-credits a {
  color: white;
  text-decoration: none;
  font-weight: bold;
}

.photo-credits a:hover { text-decoration: underline; }

/* ===== LOGOS INSTITUCIONALES ===== */
.institutional-logos-container {
  display: flex;
  justify-content: center;
  width: 100%;
}

.institutional-logos {
  display: inline-flex !important;
  flex-wrap: nowrap !important;
  gap: 30px;
  margin: 1rem auto;
  padding: 0 !important;
  background: transparent !important;
}

.institutional-logo {
  height: 45px !important;
  width: auto;
  max-width: 100px;
  transition: all 0.3s ease;
  filter: grayscale(30%);
}

.institutional-logo:hover {
  transform: scale(1.1) translateY(-5px);
  filter: grayscale(0%) drop-shadow(0 5px 5px rgba(0,0,0,0.2));
}

/* ===== POST-ITS ===== */
.post-it-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 30px 0;
}

.post-it {
  padding: 20px;
  border-radius: 5px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.15), 0 3px 6px rgba(0,0,0,0.1);
  transform: rotate(-2deg);
  transition: all 0.3s ease;
  position: relative;
  min-height: 180px;
  display: flex;
  flex-direction: column;
}

.post-it:hover {
  transform: rotate(0deg) scale(1.05);
  box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}

.post-it h3 {
  margin-top: 0;
  border-bottom: 2px dashed rgba(0,0,0,0.1);
  padding-bottom: 10px;
}

.post-it::after {
  content: "";
  position: absolute;
  bottom: 10px;
  right: 10px;
  width: 30px;
  height: 30px;
  background: linear-gradient(135deg, transparent 0%, transparent 50%, rgba(0,0,0,0.1) 50%, rgba(0,0,0,0.1) 100%);
}

.post-it.yellow {
  background: linear-gradient(135deg, #FFF8B8 0%, #FEF5A4 100%);
  color: #5E4B1A;
}

.post-it.blue {
  background: linear-gradient(135deg, #B8E6FF 0%, #A4D8FE 100%);
  color: #1A3D5E;
}

.post-it.green {
  background: linear-gradient(135deg, #D1F7D1 0%, #BDF5BD 100%);
  color: #1E5E1A;
}

.post-it.pink {
  background: linear-gradient(135deg, #FFD1F7 0%, #FEBDF0 100%);
  color: #5E1A54;
}

/* ===== FOOTER ===== */
.credits-footer {
  margin-top: 1rem;
  padding: 0.5rem;
  font-size: 0.75rem;
  color: #666;
  border-top: none;
}

.credits-footer a {
  color: #413224;
  margin: 0 3px;
}

/* ===== ESTILOS ESPECÍFICOS LA PALMA ===== */
#la-palma .panel-tabset,
#la-palma .tab-content,
#la-palma .tab-pane,
#la-palma .cell,
#la-palma .cell-output,
#la-palma .cell-output-display,
#la-palma .quarto-figure {
  background: transparent !important;
  padding: 0 !important;
  margin: 0 !important;
  border: none !important;
  box-shadow: none !important;
}

#la-palma iframe {
  background: transparent !important;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* Añade esto a tu sección de estilos */
.lapalma-logo {
  width: 150px !important;
  height: 150px !important; /* Mismo valor que width para mantener el círculo perfecto */
  margin: 0 auto !important;
  box-shadow: 0 0 15px rgba(0,0,0,0.3) !important;
  background-color: rgba(47, 45, 45, 0.8);
  border-radius: 50% !important;
  padding: 5px !important;
  position: relative;
  overflow: hidden;
}

.lapalma-logo img {
  width: 70% !important; /* Ajusta este valor según necesites */
  height: auto !important;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -45%);
  object-fit: contain;
}


/* ===== ESTILOS TERREMOTOS ===== */
#earthquakes .panel-tabset {
  background: transparent !important;
  border: none !important;
}

#earthquakes .grid-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 20px;
}

#earthquakes .map-container, 
#earthquakes .histogram-container {
  background: rgba(255,255,255,0.7);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  height: 500px;
}

#earthquakes .table-container {
  width: 100%;
  background: rgba(255,255,255,0.7);
  border-radius: 12px;
  padding: 15px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  margin-top: 20px;
}

#earthquakes iframe {
  border: none;
  border-radius: 8px;
  width: 100%;
  height: 100%;
}
/* ===== LIMPIEZA DE BORDES RESIDUALES ===== */
.dashboard > .grid {
  gap: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Eliminar cualquier espacio entre filas */
.dashboard > .grid > .row {
  margin: 0 !important;
  padding: 0 !important;
  gap: 0 !important;
}

/* Limpieza específica para las secciones principales */
#homepage, #la-palma, #earthquakes {
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  outline: none !important;
}

/* Limpieza de iframes embebidos */
iframe {
  border: none !important;
  outline: none !important;
}

/* Eliminar sombras/bordes residuales de las celdas */
.cell {
  box-shadow: none !important;
  border: none !important;
  outline: none !important;
}

/* Limpieza específica para el banner */
.homepage-header {
  margin-bottom: 0 !important;
}

/* Asegurar que no hay espacios en los contenedores */
.panel-card, .panel-card-body, .panel-tabset {
  margin: 0 !important;
  padding: 0 !important;
}
/* ===== ELIMINAR BORDE INFERIOR DE .tab-content ===== */
.tab-content {
  border-bottom: none !important;
  /* Opcional: si quieres mantener los otros bordes pero modificarlos */
  border-left: 1px solid transparent !important;
  border-right: 1px solid transparent !important;
  /* También puedes ajustar el padding si es necesario */
  padding: 1em 1em 0 1em !important; /* Elimina padding-bottom */
}

/*Solución nuclear (elimina cualquier espacio residual) */
#la-palma .credits-footer {
    margin: 0 !important;
    padding: 0!important;
    border: none !important;
}

</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  console.log("🚀 Iniciando carruseles...");
  
  function initCarousel(containerSelector) {
    console.log(`🔍 Buscando carrusel: ${containerSelector}`);
    const container = document.querySelector(containerSelector);
    
    if (!container) {
      console.error(`❌ No se encontró el contenedor: ${containerSelector}`);
      return;
    }
    
    const slides = container.querySelectorAll('.carousel-slide');
    const credits = container.querySelectorAll('.photo-credits');
    
    console.log(`📸 Slides encontrados: ${slides.length}`);
    
    if (slides.length === 0) {
      console.warn(`⚠️ No hay slides en: ${containerSelector}`);
      return;
    }

    let currentIndex = 0;
    let intervalId;

    // Función para actualizar visibilidad
    function updateVisibility() {
      slides.forEach((slide, index) => {
        const isActive = index === currentIndex;
        slide.style.opacity = isActive ? '1' : '0';
        slide.classList.toggle('active', isActive);
        
        if (credits[index]) {
          credits[index].style.display = isActive ? 'block' : 'none';
          credits[index].classList.toggle('hidden', !isActive);
        }
      });
    }

    // Inicializar
    updateVisibility();

    function showNextSlide() {
      console.log("🔄 Cambiando slide...");
      
      // Oculta el slide actual
      slides[currentIndex].style.opacity = '0';
      slides[currentIndex].classList.remove('active');
      if (credits[currentIndex]) {
        credits[currentIndex].style.display = 'none';
        credits[currentIndex].classList.add('hidden');
      }

      // Calcula nuevo índice
      currentIndex = (currentIndex + 1) % slides.length;
      console.log(`🎯 Nuevo índice: ${currentIndex}`);

      // Muestra nuevo slide
      slides[currentIndex].style.opacity = '1';
      slides[currentIndex].classList.add('active');
      if (credits[currentIndex]) {
        credits[currentIndex].style.display = 'block';
        credits[currentIndex].classList.remove('hidden');
      }
    }

    // Iniciar solo si hay más de 1 slide
    if (slides.length > 1) {
      console.log("⏱️ Iniciando intervalo...");
      intervalId = setInterval(showNextSlide, 5000);

      // Pausar al interactuar
      container.addEventListener('mouseenter', () => {
        console.log("⏸️ Pausando carrusel");
        clearInterval(intervalId);
      });
      
      container.addEventListener('mouseleave', () => {
        console.log("▶️ Reanudando carrusel");
        intervalId = setInterval(showNextSlide, 5000);
      });
    }
  }

  // Inicializar todos los carruseles
  initCarousel('.homepage .carousel-container');
  initCarousel('#la-palma .carousel-container');
  initCarousel('#earthquakes .carousel-container');
});
</script>




<script>
document.addEventListener('DOMContentLoaded', function() {
  // Crear botones de navegación
  const navContainer = document.createElement('div');
  navContainer.className = 'circle-nav-container';
  
  navContainer.innerHTML = `
    <div class="circle-nav-btn" id="homepage-btn" title="Home"></div>
    <div class="circle-nav-btn" id="la-palma-btn" title="La Palma"></div>
    <div class="circle-nav-btn" id="earthquakes-btn" title="Earthquakes"></div>
  `;
  
  document.body.appendChild(navContainer);

  // Funcionalidad de los botones
  const homepageBtn = document.getElementById('homepage-btn');
  const laPalmaBtn = document.getElementById('la-palma-btn');
  const earthquakesBtn = document.getElementById('earthquakes-btn');

  homepageBtn.addEventListener('click', () => {
    window.location.hash = '#homepage';
    updateActiveButton('#homepage');
  });
  
  laPalmaBtn.addEventListener('click', () => {
    window.location.hash = '#la-palma';
    updateActiveButton('#la-palma');
  });
  
  earthquakesBtn.addEventListener('click', () => {
    window.location.hash = '#earthquakes';
    updateActiveButton('#earthquakes');
  });

  // Función para actualizar botones visibles
  function updateActiveButton(activeTab) {
    // Reset all buttons
    homepageBtn.style.display = 'flex';
    laPalmaBtn.style.display = 'flex';
    earthquakesBtn.style.display = 'flex';
    
    // Hide the active tab button
    switch(activeTab) {
      case '#homepage':
        homepageBtn.style.display = 'none';
        break;
      case '#la-palma':
        laPalmaBtn.style.display = 'none';
        break;
      case '#earthquakes':
        earthquakesBtn.style.display = 'none';
        break;
    }
  }

  // Actualizar al cargar la página
  function handleHashChange() {
    const currentHash = window.location.hash || '#homepage';
    updateActiveButton(currentHash);
  }

  // Escuchar cambios en el hash
  window.addEventListener('hashchange', handleHashChange);
  
  // Inicializar
  handleHashChange();
  
  // Añadir clase al body para estilos CSS
  document.body.setAttribute('data-has-circular-nav', 'true');
});
</script>

```{python}
#| label: load-packages
from plotnine import *
import great_tables as gt
import pandas as pd
import glob
from IPython.display import Image
import os
import plotly.io as pio
from IPython.display import IFrame, HTML
```

# 🏝️ HOMEPAGE {.homepage}
```{python}
#| label: homepage-content
#| echo: false
HTML(f"""
<div class="homepage">
  <!-- Carrusel optimizado -->
  <div class="homepage-header">
    <div class="carousel-container">
      <!-- Slide 1 -->
      <div class="carousel-slide active" style="background-image: url('B_images/volcano1.jpg');">
        <div class="photo-credits">
          © <a href="https://www.lagacetadesalamanca.es/nacional/las-espeluznantes-imagenes-de-la-lava-del-volcan-de-la-palma-a-la-puerta-de-las-casas-CF9034325" target="_blank">La Gaceta</a>
        </div>
      </div>
      
      <!-- Slide 2 -->
      <div class="carousel-slide" style="background-image: url('B_images/volcano5.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://turismolanzarote.com/que-visitar/cact-lanzarote/montanas-del-fuego/" target="_blank">El País</a>
        </div>
      </div>
      
      <!-- Slide 3 -->
      <div class="carousel-slide" style="background-image: url('B_images/volcano3.jpeg');">
        <div class="photo-credits hidden">
          © <a href="https://www.nationalgeographic.com.es/fotografia/erupcion-palma-imagenes_17364" target="_blank">National Geographic</a>
        </div>
      </div>
      
      <div class="carousel-overlay"></div>
      <div class="homepage-logo-container">
        <img src="B_images/Logo_Volcana.jpeg" alt="VOLCANA Logo" class="homepage-logo">
        <img src="B_images/Volcana_letras.png" alt="VOLCANA" class="volcana-title">
      </div>
    </div>
  </div>

  <div class="homepage-section">
    <h2>About the Project</h2>
    <p class="homepage-text">
      This research project, developed by the CSIC, focuses on the monitoring and analysis of volcanic activity in the Canary Islands. 
      The project particularly investigates the Tajogaite volcano eruption in La Palma in 2021, as well as continuous monitoring of the Teide volcano in Tenerife.
    </p>
    <p class="homepage-text">
      <strong>We are Physics students from the University of La Laguna</strong>, currently undertaking our <strong>company internship program (Prácticas de Empresa)</strong>. 
      This project is part of our training and academic development.
    </p>
    <p class="homepage-text">
      Our team, in collaboration with the <a href="https://www.csic.es/es" target="_blank">CSIC</a> and the <a href="https://www.ull.es/" target="_blank">University of La Laguna</a>, combines various techniques such as remote sensing, data analysis, 
      and scientific visualization to better understand volcanic processes and improve early warning systems.
    </p>
  </div>
  
  <div class="homepage-section">
  <h2>Project Goals</h2>
 
  <div class="post-it-container">
    <!-- Post-it 1 -->
    <div class="post-it yellow">
      <h3>Thermal Analysis</h3>
      <p>Analyze <strong>brightness temperature</strong> and <strong>radiance patterns</strong>, model post-eruption lava cooling curves and monitor the fumarole fields of Teide volcano using thermal infrared data.</p>
    </div>
   
    <!-- Post-it 2 -->
    <div class="post-it blue">
      <h3>Earthquake Correlation</h3>
      <p>Analyze <strong>earthquake-eruption correlations</strong> with a custom trigger index based on distance between the epicenter of the events, the volcano we are studying and the magnitude of these events.</p>
    </div>
   
    <!-- Post-it 3 -->
    <div class="post-it green">
      <h3>Data Screening</h3>
      <p>Perform <strong>seismic filtering</strong> to identify signs of volcanic activation with ~5 year prediction window.</p>
    </div>
   
    <!-- Post-it 4 -->
    <div class="post-it pink">
      <h3>Technical Development</h3>
      <p>Create Python tools for satellite data processing, automated visualization pipelines and ML models for eruption prediction.</p>
    </div>
  </div>
</div>
  
  <div class="homepage-section">
    <h2>Data Sources</h2>
    <p class="homepage-text">
      The primary data sources for this project include:
      <ul>
        <li><strong>NASA LAADS DAAC</strong> (MODIS/VIIRS data)</li>
        <li><strong>Copernicus Open Access Hub</strong> (Sentinel satellite data)</li>
        <li><strong>USGS Earthquake Catalogue</strong> (Seismic and volcanic data)</li>
      </ul>
    </p>
  </div>
  
  <div class="institutional-logos-container">
    <div class="institutional-logos">
      <a href="https://www.csic.es/es" target="_blank" class="institutional-logo-link">
        <img src="B_images/Logotipo_del_CSIC.png" alt="CSIC Logo" class="institutional-logo">
      </a>
      <a href="https://www.ipna.csic.es/" target="_blank" class="institutional-logo-link">
        <img src="B_images/Logo-Ipna-Secic.png" alt="IPNA-CSIC Logo" class="institutional-logo">
      </a>
      <a href="https://www.ull.es/" target="_blank" class="institutional-logo-link">
        <img src="B_images/logo-ull.png" alt="ULL Logo" class="institutional-logo">
      </a>
    </div>
  </div>
</div>
  <!-- Nuevo footer de créditos -->
  <div class="credits-footer">
    <p>Images sources: 
      <a href="https://www.lagacetadesalamanca.es/nacional/las-espeluznantes-imagenes-de-la-lava-del-volcan-de-la-palma-a-la-puerta-de-las-casas-CF9034325" target="_blank">La Gaceta de Salamanca</a>, 
      <a href="https://turismolanzarote.com/que-visitar/cact-lanzarote/montanas-del-fuego/" target="_blank">El País</a>, 
      <a href="https://www.nationalgeographic.com.es/fotografia/erupcion-palma-imagenes_17364" target="_blank">National Geographic</a>.
    </p>
    <p>All images are used for educational and research purposes.</p>
  </div>
</div>
""")

```



# 🏝️ LA PALMA {#la-palma}

```{python}
#| label: geometry
#| include: false
import subprocess
subprocess.run(["python", "../A02_utils/geometry_2.py"], check=True)
```

```{python}
#| label: la-palma-carousel
#| echo: false
HTML(f"""
<div class="homepage">
  <!-- Carrusel optimizado -->
  <div class="homepage-header">
    <div class="carousel-container">
      <!-- Slide 1 -->
      <div class="carousel-slide active" style="background-image: url('B_images/lapalma.png');">
        <div class="photo-credits">
          © <a href="https://volcano.si.edu/volcano.cfm?vn=383010" target="_blank">Smithsonian Institution</a>
        </div>
      </div>
      
      <!-- Slide 2 -->
      <div class="carousel-slide" style="background-image: url('B_images/lapalma2.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://www.elperiodico.com/es/fotos/sociedad/erupcion-palma-imagenes-12093812/12125762" target="_blank">Sociedad</a>
        </div>
      </div>
      
      <!-- Slide 3 -->
      <div class="carousel-slide" style="background-image: url('B_images/lapalma3.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://www.elperiodico.com/es/fotos/sociedad/erupcion-palma-imagenes-12093812/12125762" target="_blank">Sociedad</a>
        </div>
      </div>
      
      <div class="carousel-overlay"></div>
      <div class="homepage-logo-container">
  <div class="lapalma-logo">
    <img src="B_images/La_Palma_contorno_naranja.png" alt="La Palma Logo">
  </div>
  <div class="volcana-title" style="color: #d7512c; font-size: 2.5em; font-weight: bold; margin-top: 10px;">
    Volcanic Activity in La Palma
  </div>
</div>
    </div>
  </div>
</div>
  <!-- Nuevo footer de créditos -->
  <div class="credits-footer">
    </p>
  </div>
</div>
""")
```

```{python}
#| label: setup-potencia
#| echo: false

from IPython.display import HTML

HTML('''
<style>
/* Main container */
.main-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 15px;
}

/* Hero Banner */
.hero-banner {
    background: linear-gradient(135deg, #d7512c 0%, #413224 100%);
    color: white;
    padding: 30px;
    border-radius: 12px;
    margin-bottom: 25px;
    text-align: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.hero-title {
    font-size: 2.2em;
    margin-bottom: 15px;
    font-weight: bold;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}

.hero-subtitle {
    font-size: 1.1em;
    line-height: 1.6;
    max-width: 800px;
    margin: 0 auto;
}

/* Context box styling */
.context-box {
    background: rgba(255, 255, 255, 0.92);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    border-left: 5px solid #d7512c;
    margin-bottom: 25px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.context-box:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
}

.context-title {
    color: #d7512c;
    font-size: 1.5em;
    margin-bottom: 15px;
    font-weight: bold;
    border-bottom: 2px solid #f0f0f0;
    padding-bottom: 8px;
}

.context-text {
    color: #413224;
    line-height: 1.7;
    margin-bottom: 15px;
}

/* Top section with text and map */
.top-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    margin-bottom: 25px;
    width: 100%;
    align-items: stretch;
}

.text-container {
    display: flex;
}

.map-container {
    height: 100%;
    min-height: 450px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    position: relative;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
}

.map-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
    margin: 0;
    padding: 0;
    display: block;
}

.plots-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin: 0 !important;  /* Elimina márgenes superior e inferior */
    padding: 0 !important;
}

.plot-wrapper {
    flex: 1;
    min-width: 400px;
    height: 550px;
    background: transparent !important;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    padding: 0 !important;
    margin: 0 !important;  /* Elimina todos los márgenes */
    position: relative;
    overflow: hidden;
    border: none !important;
}

/* Asegura que no haya espacio entre elementos consecutivos */
.context-box + .plots-container,
.plots-container + .context-box {
    margin-top: 0 !important;
}

.plot-caption {
    position: absolute;
    bottom: 10px;
    left: 0;
    right: 0;
    text-align: center;
    color: #666;
    font-size: 0.95em;
    font-style: italic;
    padding: 0 10px;
}

/* Video container */
.video-container {
    margin: 30px 0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0,0,0,0.15);
    position: relative;
    padding-bottom: 56.25%; /* 16:9 aspect ratio */
    height: 0;
}

.video-container iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
}

.main-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 !important;  /* Elimina padding interno */
}

/* Elimina cualquier espacio residual en los elementos hijos */
.main-container > * {
    margin-top: 0 !important;
    margin-bottom: 20px !important;  /* Solo margen inferior */
}

.main-container > *:last-child {
    margin-bottom: 0 !important;
}

.video-caption {
    text-align: center;
    margin: 12px 0 0 0;
    color: #666;
    font-size: 0.95em;
}

/* Key points styling */
.key-points {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin: 30px 0;
}

.key-point {
    background: rgba(255,255,255,0.9);
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    border-top: 4px solid #d7512c;
}

.key-point-title {
    color: #d7512c;
    font-weight: bold;
    margin-bottom: 10px;
    font-size: 1.1em;
}

/* Credits Footer */
.credits-footer {
    margin-top: 30px;
    padding: 15px 0;
    border-top: 1px solid #eee;
    color: #666;
    font-size: 0.9em;
    text-align: center;
}

/* Responsive adjustments */
@media (max-width: 900px) {
    .top-container {
        grid-template-columns: 1fr;
    }
    .map-container {
        height: 400px;
    }
    .plot-wrapper {
        min-width: 100%;
    }
    .hero-title {
        font-size: 1.8em;
    }
}

iframe {
    border: none !important;
    outline: none !important;
    margin: 0 !important;
    padding: 0 !important;
    display: block;
    overflow: hidden;
}

</style>

<div class="main-container">

  <!-- Hero Banner -->
  <div class="hero-banner">
    <div class="hero-title">Tajogaite Volcano: A Thermal Chronicle</div>
    <div class="hero-subtitle">
      The 2021 eruption on La Palma produced one of the most thoroughly documented volcanic events in Canary Islands history. 
      Explore the thermal evolution and geological impact through interactive visualizations.
    </div>
  </div>

  <!-- Top Section: Text + Map -->
  <div class="top-container">
    <!-- Text Content -->
    <div class="text-container">
      <div class="context-box">
        <div class="context-title">Decoding the Thermal Signature</div>
        <div class="context-text">
          The Tajogaite eruption established new benchmarks in volcanic monitoring, providing unprecedented thermal resolution across its 85-day eruptive period.
        </div>
        <div class="context-text">
          <strong>Visualization highlights:</strong>
        </div>
        <div class="context-text">
          • Red-shaded period marks official eruption duration<br>
          • Anomalous measurements shown in red<br>
          • Clear phase transitions visible at different temporal scales
        </div>
      </div>
    </div>
    
    <!-- Map -->
    <div class="map-container">
      <iframe src="B_images/la_palma_eruption_viewer.html"></iframe>
    </div>
  </div>

  <!-- Key Points Grid -->
  <div class="key-points">
    <div class="key-point">
      <div class="key-point-title">85 Days of Activity</div>
      <div class="context-text">
        From initial fissure opening on September 19 to declared end on December 13, 2021
      </div>
    </div>
    <div class="key-point">
      <div class="key-point-title">12.2 km² Covered</div>
      <div class="context-text">
        Lava flows ultimately covered an area equivalent to 1,700 football fields
      </div>
    </div>
    <div class="key-point">
      <div class="key-point-title">2974 MW Peak</div>
      <div class="context-text">
        Maximum radiative power recorded during the paroxysmal phase
      </div>
    </div>
  </div>

  <!-- Radiative Power Plots -->
  <div class="plots-container">
    <!-- Weekly Plot -->
    <div class="plot-wrapper">
      <iframe src="B_images/radiative_power_plot.html"></iframe>
      <p class="plot-caption">Weekly Maximum Radiative Power (MW) - S. Aveni Dataset</p>
    </div>
    
    <!-- Daily Plot -->
    <div class="plot-wrapper">
      <iframe src="B_images/radiative_power_daily.html"></iframe>
      <p class="plot-caption">Daily Radiative Power - NASA MODIS/VIIRS Data</p>
    </div>
  </div>

  <!-- Key Observations -->
  <div class="context-box">
    <div class="context-title">Eruptive Phase Analysis</div>
    <div class="context-text">
      <strong>Four distinct phases emerged from the thermal data:</strong>
    </div>
    <div class="context-text">
      <strong>Initial Phase</strong> (Sept 19-28): Rapid escalation as fissures opened<br>
      <strong>Construction Phase</strong> (Sept 29-Oct 15): Stable cone building (300-400MW)<br>
      <strong>Paroxysmal Phase</strong> (Oct 16-Nov 8): Peak output at 1,127MW<br>
      <strong>Decline Phase</strong> (Nov 9-Dec 13): Episodic spikes during waning activity
    </div>
    <div class="context-text">
      The daily resolution reveals a "volcanic ECG" pattern showing:<br>
      • Strombolian bursts (sudden spikes)<br>
      • Lava tube collapses (sharp drops)<br>
      • Atmospheric interference events
    </div>
  </div>

  <!-- Eruption Footprint -->
  <div class="context-box">
    <div class="context-title">Geological Impact</div>
    <div class="context-text">
      The interactive map documents the lava flow's dramatic progression across La Palma's western flank:
    </div>
    <div class="context-text">
      <strong>General Characteristics:</strong><br>
      • Positioned along the Cumbre Vieja volcanic ridge<br>
      • Total coverage of 12.2 km² (3.5% of La Palma's surface)<br>
      • Maximum elevation: 1,100m at main vent
    </div>
    <div class="context-text">
      <strong>Flow Dimensions:</strong><br>
      • 6.5km maximum length (to ocean entry)<br>
      • 3.5km maximum width<br>
      • Ocean reached in just 6 days (fastest recorded in Canaries)
    </div>
  </div>

  <!-- Video Section -->
  <div class="context-box">
    <div class="context-title">Eruption Timeline Visualization</div>
    <div class="context-text">
      This timelapse compilation shows the dramatic evolution of Tajogaite volcano from multiple perspectives, capturing key moments in the eruption sequence.
    </div>
  </div>
  
  <div class="video-container">
    <iframe src="https://www.youtube.com/embed/yDgV1YTPxok" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
  </div>
  <p class="video-caption">Tajogaite Volcano Eruption Timelapse - La Palma 2021 (Credit: INVOLCAN)</p>

  <!-- Scientific Significance -->
  <div class="context-box">
    <div class="context-title">Scientific Legacy</div>
    <div class="context-text">
      The Tajogaite eruption provided volcanologists with unprecedented monitoring opportunities:
    </div>
    <div class="context-text">
      • Highest resolution thermal record of any Canarian eruption<br>
      • Clear documentation of phase transitions<br>
      • Validation of new predictive models<br>
      • Insights into basaltic volcanism dynamics<br>
      • Benchmark for future eruption response protocols
    </div>
  </div>

  <!-- Credits Footer -->
  <div class="credits-footer">
    <p><strong>Data sources:</strong> Smithsonian Global Volcanism Program • USGS • IGN Spain • NASA LAADS DAAC</p>
    <p>All content presented for educational and scientific research purposes</p>
  </div>
</div>
''')
```


# 🕳️ EARTHQUAKES {#earthquakes}

```{python}
#| label: geometry_1
#| include: false
import subprocess
result = subprocess.run(["python", "../A02_utils/geometry.py"], capture_output=True, text=True)
print(result.stdout)
if result.stderr:
    print("Errors:", result.stderr)
```

```{python}
#| label: earthquakes-carousel
#| echo: false
HTML(f"""
<div class="homepage">
  <!-- Carrusel optimizado -->
  <div class="homepage-header">
    <div class="carousel-container">
      <!-- Slide 1 -->
      <div class="carousel-slide active" style="background-image: url('B_images/earthquake2.jpg');">
        <div class="photo-credits">
          © <a href="https://seismo.berkeley.edu/blog/2016/11/23/an-earthquake-of-two-flavors.html" target="_blank">Berkeley Seismology Lab</a>
        </div>
      </div>
      
      <!-- Slide 2 -->
      <div class="carousel-slide" style="background-image: url('B_images/earthquake3.jpg');">
        <div class="photo-credits hidden">
          © <a href="http://www.thulescientific.com/media.htm" target="_blank">Thule Scientific</a>
        </div>
      </div>
      
      <!-- Slide 3 -->
      <div class="carousel-slide" style="background-image: url('B_images/earthquake4.jpg');">
        <div class="photo-credits hidden">
          © <a href="https://temblor.net/" target="_blank">Temblor.net</a>
        </div>
      </div>
      
      <div class="carousel-overlay"></div>
      <div class="homepage-logo-container">
  <div class="earthquake-logo-wrapper">
    <img src="B_images/earthquake-icon-naranja.png" alt="Earthquake Icon" class="earthquake-logo">
  </div>
  <div class="volcana-title" style="color: #d7512c; font-size: 2.5em; font-weight: bold; margin-top: 10px;">
    Volcanic-Seismic Relation
  </div>
</div>
    </div>
  </div>
</div>
  <!-- Nuevo footer de créditos -->
  <div class="credits-footer">
    </p>
  </div>
</div>
""")
```


## Earthquake Monitoring {.panel-tabset}

### Mapa de Actividad Sísmica

```{python}
#| label: eq-maps-side-by-side
#| echo: false
from IPython.display import HTML

display(HTML('''
<div style="display: flex; flex-direction: row; justify-content: space-between; gap: 20px; flex-wrap: nowrap; margin-bottom: 30px;">
  <!-- Mapa 1 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_map.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>

  <!-- Mapa 2 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_map_filtered.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>
</div>
'''))


```
```{python}
#| label: eq-histograms-side-by-side
#| echo: false
from IPython.display import HTML

display(HTML('''
<div style="display: flex; flex-direction: row; justify-content: space-between; gap: 20px; flex-wrap: nowrap; margin-bottom: 30px;">
  <!-- Histograma 1 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_histogram.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>

  <!-- Histograma 2 -->
  <div style="width: 50%;">
    <iframe src="./B_images/eq_trigger_histogram.html" width="100%" height="100%" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);" scrolling="no"></iframe>
  </div>
</div>
'''))

```

```{python}
#| label: eq-table-fullwidth
#| echo: false
from IPython.display import HTML

display(HTML('''
<div style="width: 100%; max-width: 1200px; margin: 0 auto; margin-top: -10px;">
  <iframe src="./B_images/eq_table.html" width="100%" height="500" style="border:none; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.15);"></iframe>
</div>
'''))

```

```{python}
#| label: earthquakes-credits
#| echo: false
HTML("""
<!-- Nuevo footer de créditos -->
  <div class="credits-footer">
    <p>Images sources: 
      <a href="https://seismo.berkeley.edu/blog/2016/11/23/an-earthquake-of-two-flavors.html" target="_blank">Berkeley Seismology Lab</a>,  
      <a href="http://www.thulescientific.com/media.htm" target="_blank">Thule Scientific</a>,
      <a href="https://temblor.net/" target="_blank">Temblor.net</a>.
    </p>
    <p>All images are used for educational and research purposes.</p>
  </div>
</div>

""")

```


